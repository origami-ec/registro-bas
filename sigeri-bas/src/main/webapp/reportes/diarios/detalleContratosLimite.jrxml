<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="detalleContratosLimite" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="16b13f20-1221-43ad-97f2-2f868a1093b9">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="IMG_URL" class="java.lang.String"/>
	<parameter name="DESDE" class="java.lang.String"/>
	<parameter name="HASTA" class="java.lang.String"/>
	<parameter name="HASTA_STRING" class="java.lang.String"/>
	<parameter name="USUARIO" class="java.lang.Long"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\app_server\\apache-tomee-plus-1.7.1\\webapps\\rpp\\reportes\\diarios\\"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select li.id, us.usuario, li.total_pagar as total, li.desc_limit_cobro,
(li.total_pagar + li.desc_limit_cobro) as subtotal, li.inscripcion, li.certificado,
(select sum(valor_unitario) from flow.regp_liquidacion_detalles where liquidacion = li.id)
as sindescuento
from flow.regp_liquidacion li
left join app.acl_user us on (us.id = li.user_ingreso)
where estado_liquidacion = 2 and li.total_pagar = 2000.00 and
(CASE WHEN $P{USUARIO}>0 THEN user_ingreso=$P{USUARIO} ELSE user_ingreso>0 END)
and fecha_ingreso between to_timestamp($P{DESDE}, 'DD/MM/YYYY HH24:MI')::timestamp without time zone AND to_timestamp($P{HASTA}, 'DD/MM/YYYY HH24:MI')::timestamp without time zone
order by li.fecha_ingreso]]>
	</queryString>
	<field name="id" class="java.lang.Long"/>
	<field name="usuario" class="java.lang.String"/>
	<field name="total" class="java.math.BigDecimal"/>
	<field name="desc_limit_cobro" class="java.math.BigDecimal"/>
	<field name="subtotal" class="java.math.BigDecimal"/>
	<field name="inscripcion" class="java.lang.Boolean"/>
	<field name="certificado" class="java.lang.Boolean"/>
	<field name="sindescuento" class="java.math.BigDecimal"/>
	<variable name="total_1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{total}]]></variableExpression>
	</variable>
	<variable name="descuento" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{desc_limit_cobro}]]></variableExpression>
	</variable>
	<variable name="subtotales" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{subtotal}]]></variableExpression>
	</variable>
	<variable name="sindescuento" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{sindescuento}]]></variableExpression>
	</variable>
	<pageHeader>
		<band height="140" splitType="Stretch">
			<image scaleImage="FillFrame" hAlign="Center" vAlign="Middle">
				<reportElement x="0" y="1" width="555" height="60" uuid="68f6996c-42f8-4676-867a-4d4286aee101"/>
				<imageExpression><![CDATA[$P{IMG_URL}]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="0" y="61" width="555" height="20" uuid="77e5fce3-4cf3-4aaf-bed9-77e2d6611e0e"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[PARTE DIARIO DETALLADO DE RECAUDACIÓN - DETALLE DE CONTRATOS (Mayor a Limite)]]></text>
			</staticText>
			<staticText>
				<reportElement x="1" y="81" width="44" height="14" uuid="028d4d6c-5847-4916-bf3a-8080abc139bd"/>
				<text><![CDATA[Desde:]]></text>
			</staticText>
			<textField>
				<reportElement x="45" y="81" width="189" height="14" uuid="73cedfec-83d4-4545-a5df-58e8a276c5a0"/>
				<textFieldExpression><![CDATA[$P{DESDE}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="1" y="109" width="44" height="14" uuid="5d3a0c9c-edf4-40ec-9b6f-116bef040d43"/>
				<text><![CDATA[Para:]]></text>
			</staticText>
			<staticText>
				<reportElement x="45" y="109" width="189" height="14" uuid="55011cbf-8152-449f-a73c-558adcf3388d"/>
				<text><![CDATA[Tesorero(a)]]></text>
			</staticText>
			<staticText>
				<reportElement x="293" y="81" width="112" height="14" uuid="c7fe7b6a-ccde-4194-865a-dc34c7969c60"/>
				<text><![CDATA[Fecha de Impresión:]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy HH.mm.ss">
				<reportElement x="405" y="81" width="150" height="14" uuid="ef6fbaf0-2ed0-4862-bd93-1797b33048af"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="293" y="95" width="44" height="14" uuid="ab9d8eee-8d5c-4f62-afc6-df84136d8710"/>
				<text><![CDATA[De:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="337" y="95" width="218" height="14" uuid="744620e2-8960-47ed-affd-4ba7940fc4f6"/>
				<textFieldExpression><![CDATA[$P{USUARIO} == 0 ? "TODOS" : $F{usuario}.toUpperCase()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="293" y="109" width="138" height="14" uuid="2739ca9a-0cc7-4016-abeb-a3f41f039fba"/>
				<text><![CDATA[Recaudador(a) Caja No:]]></text>
			</staticText>
			<textField>
				<reportElement x="435" y="124" width="80" height="14" uuid="c2509663-233b-4f55-bfb8-177d933a23a5"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom"/>
				<textFieldExpression><![CDATA["Pág "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="515" y="124" width="40" height="14" uuid="0a52310e-42be-4267-92ad-e33d9323930f"/>
				<textElement verticalAlignment="Bottom"/>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="1" y="95" width="44" height="14" uuid="9bd868aa-9285-4a5b-91b7-4a51d388646d"/>
				<text><![CDATA[Hasta:]]></text>
			</staticText>
			<textField>
				<reportElement x="45" y="95" width="189" height="14" uuid="e4589c93-952d-46f8-8a94-ecf30c824c3b"/>
				<textFieldExpression><![CDATA[$P{HASTA_STRING}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="0" y="137" width="555" height="1" uuid="c46d4593-0910-4c95-bcb6-7e539bb09f6b"/>
			</line>
		</band>
	</pageHeader>
	<detail>
		<band height="25" splitType="Stretch">
			<subreport>
				<reportElement x="0" y="2" width="555" height="20" uuid="fc9a505a-461c-4917-a8b2-380ad45b00c2"/>
				<subreportParameter name="LIQUIDACION">
					<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "detalleContratosLimite_subreport1.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</detail>
	<summary>
		<band height="140" splitType="Stretch">
			<staticText>
				<reportElement x="84" y="92" width="150" height="20" uuid="a811f49c-8cd2-4f54-a50e-50432c1d5924"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[ELABORADO POR:]]></text>
			</staticText>
			<staticText>
				<reportElement x="333" y="93" width="150" height="20" uuid="e77beb00-f2e3-42e3-be2f-a2ccaefb822d"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[RECIBIDO POR:]]></text>
			</staticText>
			<staticText>
				<reportElement x="84" y="124" width="150" height="14" uuid="f5655aeb-15ce-4c2a-a1e2-84837ff931f5"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Recaudador(a) Caja No.:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="84" y="111" width="150" height="14" isPrintWhenDetailOverflows="true" uuid="79057a7b-8872-4ba3-981f-59967b92b75e"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{USUARIO} == 0L ? "TODOS" : $F{usuario}.toUpperCase()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="305" y="14" width="150" height="12" uuid="0df27b26-8a20-4667-a53d-f8b1c4ad9c60"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[SUBTOTAL CON DESCUENTO]]></text>
			</staticText>
			<textField>
				<reportElement x="184" y="0" width="50" height="14" uuid="011b8cda-dd4d-4bdd-96d3-f1612c19830a"/>
				<box leftPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="41" y="0" width="143" height="14" uuid="7cecc9f4-e5fb-470f-920d-1efe72117119"/>
				<box rightPadding="3"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[CANTIDAD DE TRAMITES]]></text>
			</staticText>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="455" y="14" width="100" height="12" uuid="4150cb07-8df2-416a-804f-fa2db2bbafa2"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{subtotales}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="305" y="26" width="150" height="12" uuid="5f605274-1539-44a3-8314-2972e00d0dc8"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[DESC. LIMIT. COBRO]]></text>
			</staticText>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="455" y="26" width="100" height="12" uuid="7ad1b4c8-ae61-4d95-8b41-d37becdfe569"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{descuento}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="355" y="38" width="100" height="12" uuid="bfcc99bd-40fe-498d-aa4b-e8fb3aff18ca"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[TOTAL]]></text>
			</staticText>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="455" y="38" width="100" height="12" uuid="b58467d6-b541-456b-a470-4e17422115c5"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{total_1}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="305" y="2" width="150" height="12" uuid="325991aa-1da3-446e-becc-9d3f9ab0612b"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[SUBTOTAL SIN DESCUENTO]]></text>
			</staticText>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="455" y="2" width="100" height="12" uuid="60c2310a-0f19-47fb-8ac5-aa5de5840f27"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{sindescuento}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
