<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="tareasAsigUser" language="groovy" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="0" bottomMargin="0" uuid="629c06e7-b45d-4cce-9371-9b26aa4f3604">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="negrita" pdfFontName="Helvetica-Bold"/>
	<parameter name="USUARIO" class="java.lang.Long"/>
	<parameter name="HASTA" class="java.lang.String"/>
	<parameter name="IMG_URL" class="java.lang.String"/>
	<parameter name="CANTIDAD" class="java.lang.Integer"/>
	<parameter name="DESDE" class="java.lang.String"/>
	<parameter name="HASTA_STRING" class="java.lang.String"/>
	<parameter name="USER" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select en.apellidos, COALESCE(en.apellidos,'')||' '||COALESCE(en.nombres,'') nombreCompleto, ta.* from flow.tareas_activas ta
inner join app.acl_user us on us.usuario = ta.assignee
left join app.cat_ente en on en.id = us.ente
 where ta.fecha_ingreso between to_timestamp($P{DESDE}, 'DD/MM/YYYY HH24:MI')::timestamp without time zone
 AND to_timestamp($P{HASTA}, 'DD/MM/YYYY HH24:MI')::timestamp without time zone
and (ta.assignee = $P{USER} OR ta.candidate ~ $P{USER})
order by 1;]]>
	</queryString>
	<field name="apellidos" class="java.lang.String"/>
	<field name="nombrecompleto" class="java.lang.String"/>
	<field name="id" class="java.lang.Long"/>
	<field name="num_tramite" class="java.lang.Long"/>
	<field name="fecha_ingreso" class="java.sql.Timestamp"/>
	<field name="fecha_entrega" class="java.sql.Timestamp"/>
	<field name="nombre_propietario" class="java.lang.String"/>
	<field name="id_proceso_temp" class="java.lang.String"/>
	<field name="entregado" class="java.lang.Boolean"/>
	<field name="blocked" class="java.lang.Boolean"/>
	<field name="carpeta_rep" class="java.lang.String"/>
	<field name="id_tipo_tramite" class="java.lang.Long"/>
	<field name="descripcion" class="java.lang.String"/>
	<field name="task_id" class="java.lang.String"/>
	<field name="proc_inst_id" class="java.lang.String"/>
	<field name="task_def_key" class="java.lang.String"/>
	<field name="name_" class="java.lang.String"/>
	<field name="assignee" class="java.lang.String"/>
	<field name="create_time" class="java.sql.Timestamp"/>
	<field name="form_key" class="java.lang.String"/>
	<field name="priority" class="java.lang.Integer"/>
	<field name="candidate" class="java.lang.String"/>
	<field name="rev_" class="java.lang.Integer"/>
	<group name="nombrecompleto">
		<groupExpression><![CDATA[$F{nombrecompleto}]]></groupExpression>
		<groupHeader>
			<band height="39">
				<textField>
					<reportElement x="96" y="0" width="259" height="20" uuid="b8c4ed91-e55c-44f2-a98c-d7b279accc4a"/>
					<textElement verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$F{nombrecompleto}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="416" y="0" width="139" height="20" uuid="63382eee-b303-4d02-9663-f179901d9535"/>
					<textElement verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$F{assignee}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement style="negrita" x="355" y="0" width="61" height="20" uuid="0c68287c-a697-4930-9fba-d8f5b984ab8b"/>
					<textElement verticalAlignment="Middle"/>
					<text><![CDATA[USUARIO:]]></text>
				</staticText>
				<staticText>
					<reportElement style="negrita" x="0" y="0" width="96" height="20" uuid="70b141d9-318e-4bfe-8dfe-b5ad93380846"/>
					<textElement verticalAlignment="Middle"/>
					<text><![CDATA[NOMBRE:]]></text>
				</staticText>
				<staticText>
					<reportElement style="negrita" mode="Opaque" x="-1" y="19" width="73" height="20" backcolor="#CCCCCC" uuid="c03f445d-f1d0-496b-bf78-1dae9e2078b2"/>
					<box>
						<topPen lineWidth="0.5"/>
						<leftPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle"/>
					<text><![CDATA[N° Tramite]]></text>
				</staticText>
				<staticText>
					<reportElement style="negrita" mode="Opaque" x="71" y="19" width="198" height="20" backcolor="#CCCCCC" uuid="5ff74ced-1806-4cb9-91c1-33f182ef380e"/>
					<box>
						<topPen lineWidth="0.5"/>
						<leftPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
						<rightPen lineWidth="0.5"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle"/>
					<text><![CDATA[Nombre del Proceso]]></text>
				</staticText>
				<staticText>
					<reportElement style="negrita" mode="Opaque" x="269" y="19" width="196" height="20" backcolor="#CCCCCC" uuid="7794e7d9-ce8d-4e92-8ad2-0eb88a8d7022"/>
					<box>
						<topPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle"/>
					<text><![CDATA[Tarea Asignada]]></text>
				</staticText>
				<staticText>
					<reportElement style="negrita" mode="Opaque" x="464" y="19" width="92" height="20" backcolor="#CCCCCC" uuid="a9c51f00-c255-4afe-8cdb-ae784e56981e"/>
					<box>
						<topPen lineWidth="0.5"/>
						<leftPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
						<rightPen lineWidth="0.5"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle"/>
					<text><![CDATA[Fecha Asignación]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="28">
				<textField>
					<reportElement x="365" y="0" width="100" height="20" uuid="7c599abf-ce8e-4c5b-bf30-e28d18d33609"/>
					<textFieldExpression><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="243" y="0" width="122" height="20" uuid="5844c353-c5b0-48d7-9897-c9c5f19a39c8"/>
					<text><![CDATA[TOTAL DE TAREAS >>>]]></text>
				</staticText>
				<textField>
					<reportElement x="1" y="0" width="70" height="20" uuid="1308ff7d-cf52-4dd0-b6fb-b71a55399a2a"/>
					<textFieldExpression><![CDATA[$V{COLUMN_COUNT}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band height="842" splitType="Stretch">
			<image scaleImage="FillFrame" hAlign="Center" vAlign="Middle">
				<reportElement x="0" y="0" width="555" height="842" uuid="eeb79e08-c4fe-4a76-96a8-10da98fd87c5"/>
				<imageExpression><![CDATA[$P{IMG_URL}]]></imageExpression>
			</image>
		</band>
	</background>
	<pageHeader>
		<band height="126" splitType="Stretch">
			<staticText>
				<reportElement style="negrita" x="0" y="81" width="555" height="16" uuid="5948aee7-984b-4906-9812-ead9dfca82aa"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<text><![CDATA[REPORTE DE TAREAS ASIGNADAS POR USUARIO]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy" isBlankWhenNull="true">
				<reportElement x="45" y="97" width="128" height="14" uuid="8556ea61-0b78-420d-a671-e7b9e29e6808"/>
				<textFieldExpression><![CDATA[$P{DESDE}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="1" y="97" width="44" height="14" uuid="a26d4657-cd52-4f26-94de-fde5d48b3f36"/>
				<text><![CDATA[Desde:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="256" y="111" width="218" height="14" uuid="74382cc1-50bf-4f81-a596-e566ae53ba02"/>
				<textFieldExpression><![CDATA[$P{USUARIO} == 0 ? "TODOS" : $P{USUARIO}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="201" y="111" width="55" height="14" uuid="bf9060ac-48a2-48b7-b93f-1eae4b6bf84c"/>
				<text><![CDATA[Cajero:]]></text>
			</staticText>
			<staticText>
				<reportElement x="201" y="97" width="123" height="14" uuid="344763e3-3f79-46d1-85ab-5421ee816f71"/>
				<text><![CDATA[Fecha de Impresión:]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy HH.mm.ss">
				<reportElement x="324" y="97" width="150" height="14" uuid="1be7baee-c5ee-4f76-9f77-bb71ab59bc51"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="0" y="125" width="555" height="1" uuid="44f7e2c1-8b35-4a1b-8299-ddcb31cc01f4"/>
			</line>
			<staticText>
				<reportElement x="1" y="111" width="44" height="14" uuid="e2c82891-492b-46c2-b6e4-52202cb0e9d6"/>
				<text><![CDATA[Hasta:]]></text>
			</staticText>
			<textField>
				<reportElement x="45" y="111" width="128" height="14" uuid="7b2b0a38-fb37-457c-93d4-ca7a83d04c55"/>
				<textFieldExpression><![CDATA[$P{HASTA_STRING}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement stretchType="RelativeToBandHeight" x="71" y="0" width="199" height="20" isPrintWhenDetailOverflows="true" uuid="2ba8009c-4bdf-408e-a641-93e90193b56f"/>
				<box leftPadding="5">
					<topPen lineWidth="0.2"/>
					<leftPen lineWidth="0.2"/>
					<bottomPen lineWidth="0.2"/>
					<rightPen lineWidth="0.2"/>
				</box>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{descripcion}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement stretchType="RelativeToBandHeight" x="269" y="0" width="196" height="20" isPrintWhenDetailOverflows="true" uuid="eec3f832-3912-455c-a6ab-4d9b4e08a9f1"/>
				<box leftPadding="5">
					<topPen lineWidth="0.2"/>
					<leftPen lineWidth="0.2"/>
					<bottomPen lineWidth="0.2"/>
					<rightPen lineWidth="0.2"/>
				</box>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{name_}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement stretchType="RelativeToBandHeight" x="464" y="0" width="92" height="20" isPrintWhenDetailOverflows="true" uuid="222062c2-fe81-4558-851c-fc8936edc262"/>
				<box>
					<topPen lineWidth="0.2"/>
					<leftPen lineWidth="0.2"/>
					<bottomPen lineWidth="0.2"/>
					<rightPen lineWidth="0.2"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{fecha_ingreso}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement stretchType="RelativeToBandHeight" x="-1" y="0" width="73" height="20" isPrintWhenDetailOverflows="true" uuid="9e5a2097-c9f3-4261-9337-7d22cd366cb4"/>
				<box>
					<topPen lineWidth="0.2"/>
					<leftPen lineWidth="0.2"/>
					<bottomPen lineWidth="0.2"/>
					<rightPen lineWidth="0.2"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{num_tramite}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="45" splitType="Stretch">
			<textField evaluationTime="Report">
				<reportElement x="530" y="5" width="25" height="14" uuid="5bf5ff93-58cb-41f3-8411-a52a91d55d8a"/>
				<textElement verticalAlignment="Bottom">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement positionType="Float" x="491" y="5" width="39" height="14" uuid="f8bdde5b-1837-4b45-808c-db311ba2a034"/>
				<textElement verticalAlignment="Bottom">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["Pág "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy HH.mm.ss">
				<reportElement x="243" y="5" width="150" height="14" uuid="6c2b026c-d18f-4265-9a61-a56596c772d0"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="120" y="5" width="123" height="14" uuid="576b3724-bbcf-4acd-be40-54b2e9f642bd"/>
				<text><![CDATA[Fecha de Impresión:]]></text>
			</staticText>
		</band>
	</pageFooter>
</jasperReport>
