<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="resumenCompensacion" language="groovy" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="5b26105f-b4e1-471f-8967-14f6eecbad9a">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="336"/>
	<property name="ireport.y" value="0"/>
	<parameter name="DESDE" class="java.lang.String"/>
	<parameter name="USUARIO" class="java.lang.Long"/>
	<parameter name="HASTA" class="java.lang.String"/>
	<queryString>
		<![CDATA[select liq.fecha_ingreso, liq.numero_comprobante, liq.num_tramite_rp,
case sol.es_persona when TRUE then coalesce(sol.apellidos,'')||' '||coalesce(sol.nombres,'')
else sol.razon_social end AS solicitante, sol.ci_ruc, liq.total_pagar,
case tra.es_persona when TRUE then coalesce(tra.apellidos,'')||' '||coalesce(tra.nombres,'')
else tra.razon_social end AS tramitador, liq.oficio_memo_referencia, liq.codigo_comprobante
from flow.regp_liquidacion liq
left join app.cat_ente sol on (sol.id = liq.solicitante)
left join app.cat_ente tra on (tra.id = liq.tramitador)
where liq.estado_pago = 4 and liq.estado_liquidacion = 2 and
(CASE WHEN $P{USUARIO}>0 THEN liq.user_ingreso=$P{USUARIO} ELSE liq.user_ingreso>0 END)
and liq.fecha_ingreso between to_timestamp($P{DESDE}, 'DD/MM/YYYY HH24:MI')::timestamp without time zone AND to_timestamp($P{HASTA}, 'DD/MM/YYYY HH24:MI')::timestamp without time zone order by liq.fecha_ingreso]]>
	</queryString>
	<field name="fecha_ingreso" class="java.sql.Timestamp"/>
	<field name="numero_comprobante" class="java.lang.Long"/>
	<field name="num_tramite_rp" class="java.lang.Long"/>
	<field name="solicitante" class="java.lang.String"/>
	<field name="ci_ruc" class="java.lang.String"/>
	<field name="total_pagar" class="java.math.BigDecimal"/>
	<field name="tramitador" class="java.lang.String"/>
	<field name="oficio_memo_referencia" class="java.lang.String"/>
	<field name="codigo_comprobante" class="java.lang.String"/>
	<variable name="SUM_VALOR" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{total_pagar}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal("0.00")]]></initialValueExpression>
	</variable>
	<title>
		<band height="30">
			<staticText>
				<reportElement uuid="87e41486-08c0-4080-9747-7a9a1a67e308" x="0" y="0" width="802" height="14"/>
				<box leftPadding="2"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[RESUMEN DE FORMAS DE PAGO - COMPENSACION]]></text>
			</staticText>
		</band>
	</title>
	<columnHeader>
		<band height="12" splitType="Stretch">
			<staticText>
				<reportElement uuid="10069625-ab09-4b60-8d93-fa0a72d8536b" x="0" y="0" width="20" height="12"/>
				<box>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[No]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="62966188-682a-4c3d-a228-cdc0f861e7b9" x="20" y="0" width="65" height="12"/>
				<box>
					<topPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Fecha]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="e205a0c4-3b41-40d7-9233-91d3b187941f" x="85" y="0" width="70" height="12"/>
				<box>
					<topPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Factura]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="e562cd2a-77d9-4735-b09f-ea0803d7c9c9" x="155" y="0" width="50" height="12"/>
				<box>
					<topPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Trámite]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="d86269fd-63b8-4dc7-a759-ad38432aada1" x="205" y="0" width="70" height="12"/>
				<box>
					<topPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Cédula/RUC]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="41cb144a-69da-4063-a62b-cdbfdfd9c394" x="275" y="0" width="167" height="12"/>
				<box>
					<topPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Cliente]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="82f7062c-48d8-44de-bc32-832c39a7ccf3" x="742" y="0" width="60" height="12"/>
				<box rightPadding="2">
					<topPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Valor]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="a45a889c-15ef-4b98-b636-e887af7378c1" x="442" y="0" width="150" height="12"/>
				<box>
					<topPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Solicitante]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="18795620-9b49-45b0-8b82-ac04e13a5440" x="592" y="0" width="150" height="12"/>
				<box>
					<topPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[No Oficio]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="12" splitType="Stretch">
			<textField pattern="" isBlankWhenNull="true">
				<reportElement uuid="375e6bf6-dbae-4fd8-a2fc-efa7ef76f254" x="0" y="0" width="20" height="12" isPrintWhenDetailOverflows="true"/>
				<box>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy HH.mm" isBlankWhenNull="true">
				<reportElement uuid="c814f2fd-b255-4ae3-86d8-ece24b706629" x="20" y="0" width="65" height="12" isPrintWhenDetailOverflows="true"/>
				<box>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha_ingreso}]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement uuid="2f13668e-08f6-4392-a198-47f903454871" x="85" y="0" width="70" height="12" isPrintWhenDetailOverflows="true"/>
				<box>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{codigo_comprobante}]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement uuid="2544dfd9-5c5d-49a8-8189-90a07161a508" x="155" y="0" width="50" height="12" isPrintWhenDetailOverflows="true"/>
				<box>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{num_tramite_rp}]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement uuid="67d63cb8-111d-4b47-9d5a-ab41aadbe24f" x="205" y="0" width="70" height="12" isPrintWhenDetailOverflows="true"/>
				<box>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ci_ruc}]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement uuid="f814d81f-bc68-4417-b457-eccd80789545" x="275" y="0" width="167" height="12" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="2">
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{solicitante}.toUpperCase()]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="12a16ddb-fb8f-4bf7-a225-c061f8772c8d" x="742" y="0" width="60" height="12" isPrintWhenDetailOverflows="true"/>
				<box rightPadding="2">
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{total_pagar}]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement uuid="2b2aeb57-ec31-4ef0-8256-1b4a4a150e59" x="442" y="0" width="150" height="12" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="2">
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{tramitador}.toUpperCase()]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement uuid="6e86f0f3-ac6f-4165-adef-9cc81b898f8c" x="592" y="0" width="150" height="12" isPrintWhenDetailOverflows="true"/>
				<box leftPadding="2">
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{oficio_memo_referencia}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="25">
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement uuid="4a865110-4bc8-494b-b22d-b562a1bee4de" x="742" y="0" width="60" height="16"/>
				<box rightPadding="2">
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{SUM_VALOR}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="1efdd358-521e-4862-b2fc-bc3e128e7c9e" x="592" y="0" width="150" height="16"/>
				<box leftPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[COMPENSACION]]></text>
			</staticText>
			<textField>
				<reportElement uuid="47516a0f-1770-487f-bbaa-2dcfe8f618f4" x="542" y="0" width="50" height="16"/>
				<box rightPadding="2"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
