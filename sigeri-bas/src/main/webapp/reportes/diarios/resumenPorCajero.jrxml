<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="resumenPorCajero" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="0" bottomMargin="0" uuid="16b13f20-1221-43ad-97f2-2f868a1093b9">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="IMG_URL" class="java.lang.String"/>
	<parameter name="DESDE" class="java.lang.String"/>
	<parameter name="HASTA" class="java.lang.String"/>
	<parameter name="HASTA_STRING" class="java.lang.String"/>
	<parameter name="USUARIO" class="java.lang.Long"/>
	<queryString>
		<![CDATA[select us.usuario AS nombre,
sum(det.valor_total + det.descuento - det.recargo) as valor_unit, sum(det.descuento) as descuento, sum(det.valor_total) as total, SUM(det.recargo)AS RECARGO
from flow.regp_liquidacion_detalles det
left join flow.regp_liquidacion liq on (liq.id = det.liquidacion)
left join app.reg_acto ac on (ac.id = det.acto)
left join app.cat_ente sol on (sol.id = liq.solicitante)
left join app.acl_user us on (us.id = liq.user_ingreso)
where liq.estado_liquidacion = 2 and liq.total_pagar > 0 and
(CASE WHEN $P{USUARIO}>0 THEN liq.user_ingreso=$P{USUARIO} ELSE liq.user_ingreso>0 END)
and liq.fecha_ingreso between to_timestamp($P{DESDE}, 'DD/MM/YYYY HH24:MI')::timestamp without time zone AND to_timestamp($P{HASTA}, 'DD/MM/YYYY HH24:MI')::timestamp without time zone
group by 1 order by 1]]>
	</queryString>
	<field name="nombre" class="java.lang.String"/>
	<field name="valor_unit" class="java.math.BigDecimal"/>
	<field name="descuento" class="java.math.BigDecimal"/>
	<field name="total" class="java.math.BigDecimal"/>
	<field name="recargo" class="java.math.BigDecimal"/>
	<variable name="valor_unit_1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{valor_unit}]]></variableExpression>
	</variable>
	<variable name="descuento_1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{descuento}]]></variableExpression>
	</variable>
	<variable name="recargo_1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{recargo}]]></variableExpression>
	</variable>
	<variable name="total_1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{total}]]></variableExpression>
	</variable>
	<group name="group_contratos">
		<groupExpression><![CDATA[$F{nombre}]]></groupExpression>
	</group>
	<background>
		<band height="842" splitType="Stretch">
			<image scaleImage="FillFrame" hAlign="Center" vAlign="Middle">
				<reportElement x="-20" y="0" width="594" height="842" uuid="68f6996c-42f8-4676-867a-4d4286aee101"/>
				<imageExpression><![CDATA[$P{IMG_URL}]]></imageExpression>
			</image>
		</band>
	</background>
	<pageHeader>
		<band height="160" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="80" width="555" height="20" uuid="77e5fce3-4cf3-4aaf-bed9-77e2d6611e0e"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[PARTE DIARIO DETALLADO DE RECAUDACIÓN - RESUMEN POR CAJEROS]]></text>
			</staticText>
			<staticText>
				<reportElement x="1" y="100" width="44" height="14" uuid="028d4d6c-5847-4916-bf3a-8080abc139bd"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Desde:]]></text>
			</staticText>
			<textField>
				<reportElement x="45" y="100" width="189" height="14" uuid="73cedfec-83d4-4545-a5df-58e8a276c5a0"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$P{DESDE}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="1" y="128" width="44" height="14" uuid="5d3a0c9c-edf4-40ec-9b6f-116bef040d43"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Para:]]></text>
			</staticText>
			<staticText>
				<reportElement x="45" y="128" width="189" height="14" uuid="55011cbf-8152-449f-a73c-558adcf3388d"/>
				<textElement verticalAlignment="Middle"/>
				<text><![CDATA[Tesorería]]></text>
			</staticText>
			<staticText>
				<reportElement x="293" y="100" width="112" height="14" uuid="c7fe7b6a-ccde-4194-865a-dc34c7969c60"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Fecha de Impresión:]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy HH:mm">
				<reportElement x="405" y="100" width="150" height="14" uuid="ef6fbaf0-2ed0-4862-bd93-1797b33048af"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="435" y="128" width="80" height="14" uuid="c2509663-233b-4f55-bfb8-177d933a23a5"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom"/>
				<textFieldExpression><![CDATA["Pág "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="515" y="128" width="40" height="14" uuid="0a52310e-42be-4267-92ad-e33d9323930f"/>
				<textElement verticalAlignment="Bottom"/>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="0" y="142" width="555" height="1" uuid="1ddbd7ec-f143-4481-afbf-ab9b11ef2f62"/>
			</line>
			<staticText>
				<reportElement x="1" y="114" width="44" height="14" uuid="9bd868aa-9285-4a5b-91b7-4a51d388646d"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Hasta:]]></text>
			</staticText>
			<textField>
				<reportElement x="45" y="114" width="189" height="14" uuid="e4589c93-952d-46f8-8a94-ecf30c824c3b"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$P{HASTA_STRING}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="1" y="146" width="84" height="14" forecolor="#FF0000" uuid="9b1b1e01-35e0-47f6-b2fa-a9244036efa2"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[CAJEROS:]]></text>
			</staticText>
			<staticText>
				<reportElement x="322" y="146" width="57" height="14" uuid="c100d8ec-ac28-4755-93fe-f5f0cb365014"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[SUBTOTAL]]></text>
			</staticText>
			<staticText>
				<reportElement x="378" y="146" width="57" height="14" uuid="236d4509-655f-45f3-812c-e6b475918d4a"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[DESC.]]></text>
			</staticText>
			<staticText>
				<reportElement x="435" y="146" width="57" height="14" uuid="28d15aa5-2c26-45f1-b7f5-26607b9d787e"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[RECARGO]]></text>
			</staticText>
			<staticText>
				<reportElement x="492" y="146" width="63" height="14" uuid="a0834b21-5852-4eea-8287-5b1a67f769b8"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[TOTAL]]></text>
			</staticText>
		</band>
	</pageHeader>
	<detail>
		<band height="14">
			<textField>
				<reportElement x="1" y="0" width="321" height="14" uuid="18c4074b-ed7e-4032-b666-a6198e03ecc1"/>
				<textElement>
					<font size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nombre}]]></textFieldExpression>
			</textField>
			<textField pattern="¤ #,##0.00">
				<reportElement x="322" y="0" width="57" height="14" uuid="7b09c83a-7b8d-4797-a3b8-182fdef451f0"/>
				<textElement textAlignment="Right">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{valor_unit}]]></textFieldExpression>
			</textField>
			<textField pattern="¤ #,##0.00">
				<reportElement x="379" y="0" width="56" height="14" uuid="ffa6cdc7-36af-47e0-9326-7329acb929f0"/>
				<textElement textAlignment="Right">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{descuento}]]></textFieldExpression>
			</textField>
			<textField pattern="¤ #,##0.00">
				<reportElement x="492" y="0" width="63" height="14" uuid="e51902d4-a48a-483d-bbb9-a2db559fbf12"/>
				<textElement textAlignment="Right">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{total}]]></textFieldExpression>
			</textField>
			<textField pattern="¤ #,##0.00">
				<reportElement x="435" y="0" width="57" height="14" uuid="4ffad1a3-852c-4098-99f1-f6d9292140e2"/>
				<textElement textAlignment="Right">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{recargo}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="130">
			<staticText>
				<reportElement x="73" y="81" width="150" height="20" uuid="a811f49c-8cd2-4f54-a50e-50432c1d5924"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[ELABORADO POR:]]></text>
			</staticText>
			<staticText>
				<reportElement x="322" y="82" width="150" height="20" uuid="e77beb00-f2e3-42e3-be2f-a2ccaefb822d"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[RECIBIDO POR:]]></text>
			</staticText>
			<staticText>
				<reportElement x="73" y="113" width="150" height="14" uuid="f5655aeb-15ce-4c2a-a1e2-84837ff931f5"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Recaudador(a) Caja No.:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="73" y="100" width="150" height="14" isPrintWhenDetailOverflows="true" uuid="79057a7b-8872-4ba3-981f-59967b92b75e"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{USUARIO} == 0L ? "TODOS" : ""]]></textFieldExpression>
			</textField>
			<textField pattern="¤ #,##0.00">
				<reportElement x="323" y="0" width="56" height="14" uuid="3c50bc11-2d13-4e6e-97d6-079b1db78693"/>
				<textElement textAlignment="Right">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{valor_unit_1}]]></textFieldExpression>
			</textField>
			<textField pattern="¤ #,##0.00">
				<reportElement x="378" y="0" width="57" height="14" uuid="9b72fbfd-18a5-4713-aa83-9804c28d63c0"/>
				<textElement textAlignment="Right">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{descuento_1}]]></textFieldExpression>
			</textField>
			<textField pattern="¤ #,##0.00">
				<reportElement x="435" y="0" width="57" height="14" uuid="b07aac8e-1745-402c-9364-b27ec6578a80"/>
				<textElement textAlignment="Right">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{recargo_1}]]></textFieldExpression>
			</textField>
			<textField pattern="¤ #,##0.00">
				<reportElement x="492" y="0" width="63" height="14" uuid="ab426c6f-882a-40a2-85c2-f43cece57a53"/>
				<textElement textAlignment="Right">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{total_1}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="200" y="0" width="355" height="2" uuid="37f1f212-c513-44b4-8507-544556d8e2ab"/>
			</line>
		</band>
	</summary>
</jasperReport>
