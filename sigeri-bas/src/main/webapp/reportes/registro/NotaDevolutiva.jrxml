<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="NotaDevolutiva" language="groovy" pageWidth="595" pageHeight="842" columnWidth="455" leftMargin="70" rightMargin="70" topMargin="0" bottomMargin="0" uuid="e70bf7b3-10e4-457b-953e-a72467c75fab">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="192"/>
	<style name="timesroman" pdfFontName="Times-Roman"/>
	<style name="timesbold" pdfFontName="Times-Bold"/>
	<parameter name="ID_NOTA" class="java.lang.Long">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="WATERMARK_URL" class="java.lang.String"/>
	<parameter name="JURIDICA" class="java.lang.String"/>
	<parameter name="REGISTRADOR" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT nd.num_nota_devolutiva, nd.fecha, li.inscripcion, nd.firma, li.num_tramite_rp,
case e.es_persona when true then coalesce(e.nombres,'')||' '||coalesce(e.apellidos,'')
else e.razon_social end AS nota_para, nd.asunto, nd.elaborado, nd.fecha, nd.fecha_ingreso,
coalesce(eu.apellidos,'')  || ' ' ||  coalesce(eu.nombres,'') as hecho,
coalesce(ej.apellidos,'')  || ' ' ||  coalesce(ej.nombres,'') as juridica,
nd.detalle as descripcion, li.repertorio, li.fecha_ingreso as fecha_pago
FROM flow.regp_nota_devolutiva nd
inner join app.cat_ente e on nd.para = e.id
left outer join app.acl_user us on us.usuario = nd.realizado
inner join app.cat_ente eu on us.ente = eu.id
left outer join app.acl_user uj on uj.usuario = nd.elaborado
inner join app.cat_ente ej on uj.ente = ej.id
left join flow.regp_liquidacion li on li.tramite = nd.tramite
where nd.ID = $P{ID_NOTA}]]>
	</queryString>
	<field name="num_nota_devolutiva" class="java.lang.String"/>
	<field name="fecha" class="java.lang.String"/>
	<field name="inscripcion" class="java.lang.Boolean"/>
	<field name="firma" class="java.lang.String"/>
	<field name="num_tramite_rp" class="java.lang.Long"/>
	<field name="nota_para" class="java.lang.String"/>
	<field name="asunto" class="java.lang.String"/>
	<field name="elaborado" class="java.lang.String"/>
	<field name="fecha_ingreso" class="java.sql.Timestamp"/>
	<field name="hecho" class="java.lang.String"/>
	<field name="juridica" class="java.lang.String"/>
	<field name="descripcion" class="java.lang.String"/>
	<field name="repertorio" class="java.lang.Integer"/>
	<field name="fecha_pago" class="java.sql.Timestamp"/>
	<background>
		<band height="840" splitType="Stretch">
			<image scaleImage="FillFrame" hAlign="Center" vAlign="Middle">
				<reportElement x="-70" y="0" width="594" height="840" uuid="a157dd5e-8879-4e2a-a355-65e37cf5beb9"/>
				<imageExpression><![CDATA[$P{WATERMARK_URL}]]></imageExpression>
			</image>
		</band>
	</background>
	<pageHeader>
		<band height="80" splitType="Stretch"/>
	</pageHeader>
	<detail>
		<band height="80" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="timesroman" x="130" y="60" width="325" height="20" isPrintWhenDetailOverflows="true" uuid="f0d176c8-3c77-4aa9-95a7-4eb333c75883"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle">
					<font size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nota_para}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="timesbold" x="0" y="0" width="455" height="40" uuid="dc42d714-5e91-4b71-ad55-52f5fcb1d492"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="22"/>
				</textElement>
				<text><![CDATA[NOTA DEVOLUTIVA]]></text>
			</staticText>
			<staticText>
				<reportElement style="timesroman" x="111" y="40" width="120" height="20" uuid="34c8cac6-03c7-4869-884f-0189b9b71c74"/>
				<box rightPadding="2">
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12"/>
				</textElement>
				<text><![CDATA[Nro. de Trámite:]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="timesroman" x="231" y="40" width="120" height="20" isPrintWhenDetailOverflows="true" uuid="f003ffe3-236e-4f50-91e4-f9cc67bbbfc9"/>
				<box leftPadding="2">
					<topPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{num_tramite_rp}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="timesroman" x="0" y="60" width="130" height="20" uuid="2f1b04d1-1669-4e90-b6dd-eb57b03e6e3f"/>
				<textElement verticalAlignment="Middle">
					<font size="12"/>
				</textElement>
				<text><![CDATA[Para:]]></text>
			</staticText>
		</band>
		<band height="150" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="timesroman" x="0" y="60" width="455" height="90" isPrintWhenDetailOverflows="true" uuid="f2168236-4cfd-4c48-b6eb-b589a513d4d0"/>
				<textElement textAlignment="Justified" verticalAlignment="Top" markup="html">
					<font size="12" isBold="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{descripcion}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="timesroman" positionType="Float" x="0" y="0" width="130" height="20" uuid="07169ccb-183e-42d5-aea3-3260ed954be3"/>
				<textElement verticalAlignment="Middle">
					<font size="12"/>
				</textElement>
				<text><![CDATA[Repertorio:]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="timesroman" positionType="Float" x="130" y="0" width="325" height="20" isPrintWhenDetailOverflows="true" uuid="43fd5e8d-619b-470e-aec7-aad9169c5d3d">
					<printWhenExpression><![CDATA[$F{inscripcion}]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{repertorio}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="timesroman" positionType="Float" x="0" y="20" width="130" height="20" uuid="fba2407f-91c5-4202-a8c8-391f06d90dc8"/>
				<textElement verticalAlignment="Middle">
					<font size="12"/>
				</textElement>
				<text><![CDATA[Fecha Ingreso:]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" pattern="dd &apos;de&apos; MMMMM &apos;del&apos; yyyy" isBlankWhenNull="true">
				<reportElement style="timesroman" positionType="Float" x="130" y="20" width="325" height="20" isPrintWhenDetailOverflows="true" uuid="e4bb237d-fcb1-4156-bcfa-a174b47dcc51"/>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha_pago}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="timesroman" positionType="Float" x="0" y="40" width="130" height="20" uuid="88b0780f-b5f2-4c53-b7c4-b8f16b44cefc"/>
				<textElement verticalAlignment="Middle">
					<font size="12"/>
				</textElement>
				<text><![CDATA[Fecha Repertorio:]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" pattern="dd &apos;de&apos; MMMMM &apos;del&apos; yyyy" isBlankWhenNull="true">
				<reportElement style="timesroman" positionType="Float" x="130" y="40" width="325" height="20" isPrintWhenDetailOverflows="true" uuid="4bfafcf4-2187-4bb5-8903-226fa2a2f0ae"/>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha_pago}]]></textFieldExpression>
			</textField>
		</band>
		<band height="40" splitType="Stretch"/>
	</detail>
	<pageFooter>
		<band height="80" splitType="Stretch">
			<textField>
				<reportElement style="timesroman" x="0" y="28" width="50" height="14" uuid="f9830bbb-6662-415f-afbb-e15d265d34cb"/>
				<textElement textAlignment="Right">
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA["Pág. "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement style="timesroman" x="50" y="28" width="40" height="14" uuid="f241d60d-62ad-4b8c-9974-f066b1d0a704"/>
				<textElement>
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="timesroman" x="0" y="14" width="180" height="14" uuid="ab0958cb-7b7c-4b80-8cf4-ba1fd262d633"/>
				<textElement verticalAlignment="Middle">
					<font size="10"/>
				</textElement>
				<text><![CDATA[Revisor Registral:]]></text>
			</staticText>
			<staticText>
				<reportElement style="timesroman" x="0" y="0" width="180" height="14" uuid="8fc2d917-2095-43b0-8f4f-90bf9bfe4bc4"/>
				<textElement verticalAlignment="Middle">
					<font size="10"/>
				</textElement>
				<text><![CDATA[Fecha emisión nota devolutiva:]]></text>
			</staticText>
			<textField>
				<reportElement style="timesroman" x="180" y="14" width="275" height="14" uuid="48cdad9c-13ab-4de8-ab78-92212256998d"/>
				<textElement verticalAlignment="Middle">
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{elaborado}.toUpperCase()]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement style="timesroman" x="180" y="0" width="275" height="14" isPrintWhenDetailOverflows="true" uuid="c23cde17-fdca-4fef-8f5d-7c0ce434eac7"/>
				<textElement verticalAlignment="Middle">
					<font size="10" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
