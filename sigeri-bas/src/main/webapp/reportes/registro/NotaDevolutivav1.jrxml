<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="NotaDevolutiva" language="groovy" pageWidth="595" pageHeight="842" columnWidth="455" leftMargin="70" rightMargin="70" topMargin="0" bottomMargin="0" uuid="e70bf7b3-10e4-457b-953e-a72467c75fab">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="432"/>
	<style name="html" fill="Solid" markup="html" isBlankWhenNull="true" fontSize="10" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1250" isPdfEmbedded="true"/>
	<style name="style_bold" isBold="true" isItalic="false" isUnderline="false" pdfFontName="Helvetica-Bold"/>
	<parameter name="ID_NOTA" class="java.lang.Long">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="WATERMARK_URL" class="java.lang.String"/>
	<parameter name="JURIDICA" class="java.lang.String"/>
	<parameter name="REGISTRADOR" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT nd.num_nota_devolutiva, nd.fecha, li.inscripcion, nd.firma,
case e.es_persona when true then coalesce(e.nombres,'')||' '||coalesce(e.apellidos,'')
else e.razon_social end AS nota_para, nd.asunto, nd.elaborado, nd.fecha, nd.fecha_ingreso,
coalesce(eu.apellidos,'')  || ' ' ||  coalesce(eu.nombres,'') as hecho,
coalesce(ej.apellidos,'')  || ' ' ||  coalesce(ej.nombres,'') as juridica,
nd.detalle as descripcion, li.repertorio, li.fecha_ingreso as fecha_pago
FROM flow.regp_nota_devolutiva nd
inner join app.cat_ente e on nd.para = e.id
left outer join app.acl_user us on us.usuario = nd.realizado
inner join app.cat_ente eu on us.ente = eu.id
left outer join app.acl_user uj on uj.usuario = nd.elaborado
inner join app.cat_ente ej on uj.ente = ej.id
left join flow.regp_liquidacion li on li.tramite = nd.tramite
where nd.ID = $P{ID_NOTA}]]>
	</queryString>
	<field name="num_nota_devolutiva" class="java.lang.String"/>
	<field name="fecha" class="java.lang.String"/>
	<field name="inscripcion" class="java.lang.Boolean"/>
	<field name="firma" class="java.lang.String"/>
	<field name="nota_para" class="java.lang.String"/>
	<field name="asunto" class="java.lang.String"/>
	<field name="elaborado" class="java.lang.String"/>
	<field name="fecha_ingreso" class="java.sql.Timestamp"/>
	<field name="hecho" class="java.lang.String"/>
	<field name="juridica" class="java.lang.String"/>
	<field name="descripcion" class="java.lang.String"/>
	<field name="repertorio" class="java.lang.Integer"/>
	<field name="fecha_pago" class="java.sql.Timestamp"/>
	<background>
		<band height="840" splitType="Stretch">
			<image scaleImage="FillFrame" hAlign="Center" vAlign="Middle">
				<reportElement x="-70" y="0" width="594" height="840" uuid="a157dd5e-8879-4e2a-a355-65e37cf5beb9"/>
				<imageExpression><![CDATA[$P{WATERMARK_URL}]]></imageExpression>
			</image>
		</band>
	</background>
	<pageHeader>
		<band height="95" splitType="Stretch"/>
	</pageHeader>
	<detail>
		<band height="140" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="style_bold" x="0" y="0" width="455" height="20" isPrintWhenDetailOverflows="true" uuid="4e767537-f529-4f18-a359-85df45ff787b"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA["Nota Devolutiva # " + $F{num_nota_devolutiva}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement style="style_bold" x="0" y="20" width="455" height="20" isPrintWhenDetailOverflows="true" uuid="c23cde17-fdca-4fef-8f5d-7c0ce434eac7"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="135" y="42" width="320" height="20" isPrintWhenDetailOverflows="true" uuid="f0d176c8-3c77-4aa9-95a7-4eb333c75883"/>
				<textElement verticalAlignment="Middle">
					<font size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nota_para}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="135" y="79" width="320" height="20" isPrintWhenDetailOverflows="true" uuid="187b6788-a40b-4804-8ca8-ceb7a97c2022"/>
				<textElement verticalAlignment="Middle">
					<font size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{asunto}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="style_bold" x="0" y="42" width="135" height="20" isPrintWhenDetailOverflows="true" uuid="4f9a3709-cc80-49a3-89bb-8592dcbb6738"/>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA["Para:"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="style_bold" x="0" y="79" width="135" height="20" isPrintWhenDetailOverflows="true" uuid="17293e29-9033-4aea-9959-f42a9c0529b7"/>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA["Asunto:"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="style_bold" x="0" y="119" width="135" height="20" isPrintWhenDetailOverflows="true" uuid="5b003e07-b5ad-477a-9f70-1ccaf4bacddd">
					<printWhenExpression><![CDATA[$F{inscripcion}]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA["Repertorio:"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="style_bold" x="0" y="99" width="135" height="20" isPrintWhenDetailOverflows="true" uuid="77df2570-2e04-4616-996f-153ab3b94870"/>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA["Fecha de Ingreso:"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="dd &apos;de&apos; MMMMM &apos;del&apos; yyyy" isBlankWhenNull="true">
				<reportElement x="135" y="99" width="320" height="20" isPrintWhenDetailOverflows="true" uuid="e4bb237d-fcb1-4156-bcfa-a174b47dcc51"/>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha_pago}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="135" y="119" width="320" height="20" isPrintWhenDetailOverflows="true" uuid="43fd5e8d-619b-470e-aec7-aad9169c5d3d">
					<printWhenExpression><![CDATA[$F{inscripcion}]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{repertorio}]]></textFieldExpression>
			</textField>
		</band>
		<band height="114">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="html" x="0" y="0" width="455" height="114" isPrintWhenDetailOverflows="true" uuid="f2168236-4cfd-4c48-b6eb-b589a513d4d0"/>
				<textElement textAlignment="Justified" verticalAlignment="Top" markup="html">
					<font size="12" isBold="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{descripcion}]]></textFieldExpression>
			</textField>
		</band>
		<band height="85" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="style_bold" x="104" y="60" width="250" height="25" isPrintWhenDetailOverflows="true" uuid="89691448-8f3a-4a68-adcd-6881fe664d48"/>
				<box>
					<topPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA["REVISOR REGISTRAL"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="104" y="44" width="250" height="16" uuid="48cdad9c-13ab-4de8-ab78-92212256998d"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{elaborado}.toUpperCase()]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="50" splitType="Stretch">
			<textField>
				<reportElement x="0" y="12" width="80" height="14" uuid="f9830bbb-6662-415f-afbb-e15d265d34cb"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["PÃ¡g. "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="80" y="12" width="40" height="14" uuid="f241d60d-62ad-4b8c-9974-f066b1d0a704"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="60" y="0" width="171" height="12" uuid="90307bb3-0bb4-488b-b878-5d324af709d1"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{elaborado}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="0" width="60" height="12" uuid="fbac5013-8b9a-410e-bc2b-4ee3d967067a"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[Elaborado:]]></text>
			</staticText>
		</band>
	</pageFooter>
</jasperReport>
