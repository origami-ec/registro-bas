<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="titulo_credito" language="groovy" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="30" rightMargin="30" topMargin="0" bottomMargin="0" uuid="73dd3597-5107-44cb-a7c3-db55bf31f331">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="negrita" pdfFontName="Helvetica-Bold"/>
	<parameter name="ID_LIQUIDACION" class="java.lang.Long"/>
	<parameter name="VALOR_STRING" class="java.lang.String"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\app_server\\apache-tomee-plus-1.7.1\\webapps\\rpp\\reportes\\ingreso\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="IMG_URL" class="java.lang.String"/>
	<parameter name="IMG_FIRMA" class="java.lang.String"/>
	<queryString>
		<![CDATA[select ht.num_tramite, ht.fecha_ingreso, ht.fecha_entrega,liq.certificado_no_poseer_bien,
liq.total_pagar, liq.valor_actos, liq.desc_limit_cobro, liq.inf_adicional_prof,
liq.sub_total, liq.clave_acceso, liq.codigo_comprobante, liq.gastos_generales,
liq.numero_autorizacion, en.ci_ruc as doc_beneficiario, liq.adicional,
liq.titulo_credito, liq.num_formulario,
case en.es_persona when true then
coalesce(en.nombres,'')||' '||coalesce(en.apellidos,'')
else en.razon_social end AS beneficiario,
coalesce(func.nombres,'')||' '||coalesce(func.apellidos,'') as funcionario,
liq.fecha_autorizacion, en.direccion, en.telefono1,
liq.num_inscripcion, liq.anio_inscripcion, liq.ficha, cr.usuario as ingresado,
us.usuario, liq.descuento_valor, liq.certificado, liq.ficha
from flow.historico_tramites ht
left join flow.regp_liquidacion liq on ht.id = liq.tramite
left join app.cat_ente en on en.id = liq.beneficiario
left join app.acl_user us on us.id = liq.user_ingreso
left join app.cat_ente func on func.id = us.ente
left join app.acl_user cr on cr.id = liq.user_creacion
where liq.id = $P{ID_LIQUIDACION}]]>
	</queryString>
	<field name="num_tramite" class="java.lang.Long"/>
	<field name="fecha_ingreso" class="java.sql.Timestamp"/>
	<field name="fecha_entrega" class="java.sql.Timestamp"/>
	<field name="certificado_no_poseer_bien" class="java.lang.Boolean"/>
	<field name="total_pagar" class="java.math.BigDecimal"/>
	<field name="valor_actos" class="java.math.BigDecimal"/>
	<field name="desc_limit_cobro" class="java.math.BigDecimal"/>
	<field name="inf_adicional_prof" class="java.lang.String"/>
	<field name="sub_total" class="java.math.BigDecimal"/>
	<field name="clave_acceso" class="java.lang.String"/>
	<field name="codigo_comprobante" class="java.lang.String"/>
	<field name="gastos_generales" class="java.math.BigDecimal"/>
	<field name="numero_autorizacion" class="java.lang.String"/>
	<field name="doc_beneficiario" class="java.lang.String"/>
	<field name="adicional" class="java.math.BigDecimal"/>
	<field name="titulo_credito" class="java.lang.Long"/>
	<field name="num_formulario" class="java.lang.String"/>
	<field name="beneficiario" class="java.lang.String"/>
	<field name="funcionario" class="java.lang.String"/>
	<field name="fecha_autorizacion" class="java.sql.Timestamp"/>
	<field name="direccion" class="java.lang.String"/>
	<field name="telefono1" class="java.lang.String"/>
	<field name="num_inscripcion" class="java.lang.Integer"/>
	<field name="anio_inscripcion" class="java.lang.Integer"/>
	<field name="ficha" class="java.lang.Long"/>
	<field name="ingresado" class="java.lang.String"/>
	<field name="usuario" class="java.lang.String"/>
	<field name="descuento_valor" class="java.math.BigDecimal"/>
	<field name="certificado" class="java.lang.Boolean"/>
	<background>
		<band height="391" splitType="Stretch">
			<image scaleImage="FillFrame" hAlign="Center" vAlign="Middle">
				<reportElement x="-30" y="0" width="595" height="391" uuid="39d1e1b6-30ae-450f-af82-b45e83390a18"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Double"/>
					<leftPen lineWidth="0.0" lineStyle="Double"/>
					<bottomPen lineWidth="0.0" lineStyle="Double"/>
				</box>
				<imageExpression><![CDATA[$P{IMG_URL}]]></imageExpression>
			</image>
		</band>
	</background>
	<title>
		<band height="74" splitType="Stretch">
			<staticText>
				<reportElement style="negrita" x="365" y="60" width="170" height="14" isPrintWhenDetailOverflows="true" uuid="f30a5ef8-be34-4882-9f58-600f0a93133e"/>
				<box leftPadding="2">
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[RUC: 2360007530001]]></text>
			</staticText>
			<staticText>
				<reportElement style="negrita" x="0" y="62" width="100" height="12" isPrintWhenDetailOverflows="true" uuid="38b6c5cf-5a59-41ac-bd30-c6b5512784b6">
					<printWhenExpression><![CDATA[$F{total_pagar} == 0.00]]></printWhenExpression>
				</reportElement>
				<box leftPadding="2">
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font size="8" isBold="false"/>
				</textElement>
				<text><![CDATA[Nro. Oficio/Juicio:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="100" y="62" width="265" height="12" isPrintWhenDetailOverflows="true" uuid="d9495847-e4ca-45fd-b0db-65add899e78d"/>
				<box leftPadding="0">
					<topPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{num_formulario}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band height="99" splitType="Stretch">
			<staticText>
				<reportElement style="negrita" x="0" y="1" width="100" height="14" isPrintWhenDetailOverflows="true" uuid="366a43f4-d211-4246-9b20-630156c278ec"/>
				<box leftPadding="2">
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[No. DE TITULO:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="100" y="1" width="165" height="14" isPrintWhenDetailOverflows="true" uuid="05f88a8c-6f93-40ba-839e-d02563969f55"/>
				<box leftPadding="0">
					<topPen lineWidth="1.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{titulo_credito} == null ? "" :
java.lang.String.format("%08d", $F{titulo_credito})]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="negrita" x="265" y="1" width="100" height="14" isPrintWhenDetailOverflows="true" uuid="39bbcbcb-f597-469a-b097-d284702dc53c"/>
				<box leftPadding="2">
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[No. DE TRAMITE:]]></text>
			</staticText>
			<staticText>
				<reportElement style="negrita" x="0" y="29" width="100" height="14" isPrintWhenDetailOverflows="true" uuid="2342d652-6d32-43fa-9848-7292db42a9c4"/>
				<box leftPadding="2">
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[CONTRIBUYENTE:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="365" y="1" width="170" height="14" isPrintWhenDetailOverflows="true" uuid="99bb08bc-bc32-43b8-b7e6-4e7bbf2f1712"/>
				<box>
					<topPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[java.lang.String.format("%08d", $F{num_tramite})]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="100" y="29" width="435" height="14" isPrintWhenDetailOverflows="true" uuid="aabc3fcc-be3e-4442-8a70-a131dca136b5"/>
				<box>
					<topPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{beneficiario}.toUpperCase()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="negrita" x="0" y="43" width="265" height="14" isPrintWhenDetailOverflows="true" uuid="28a20363-0f09-482a-89c7-a2e7a8433484"/>
				<box leftPadding="2">
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[OBSERVACIONES:]]></text>
			</staticText>
			<staticText>
				<reportElement style="negrita" x="0" y="15" width="100" height="14" isPrintWhenDetailOverflows="true" uuid="028d97f9-8016-41dc-ab5a-3675bfbae690"/>
				<box leftPadding="2">
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[CI/RUC:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="100" y="15" width="165" height="14" isPrintWhenDetailOverflows="true" uuid="2a504bb8-350c-460e-8ede-c2473328e12f"/>
				<box>
					<topPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{doc_beneficiario}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="negrita" x="265" y="15" width="100" height="14" isPrintWhenDetailOverflows="true" uuid="6e3884ab-58d4-446e-98f9-aae24aa52a7c"/>
				<box leftPadding="2">
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[FECHA EMISION:]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy HH:mm" isBlankWhenNull="true">
				<reportElement x="365" y="15" width="170" height="14" isPrintWhenDetailOverflows="true" uuid="f7bf92db-32c8-42fb-bc04-60ceabbdba82"/>
				<box>
					<topPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha_ingreso}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy &apos;16:00&apos;" isBlankWhenNull="true">
				<reportElement x="0" y="71" width="265" height="14" isPrintWhenDetailOverflows="true" uuid="e2ebcfd5-3a23-4011-95e6-9a5663475d47"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha_entrega}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="negrita" x="400" y="43" width="135" height="14" isPrintWhenDetailOverflows="true" uuid="f1f2a041-97f7-4a1c-9aad-4aae2d39e218"/>
				<box leftPadding="2">
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="0.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[EMITIDO POR:]]></text>
			</staticText>
			<staticText>
				<reportElement style="negrita" x="265" y="71" width="270" height="14" isPrintWhenDetailOverflows="true" uuid="882f0c02-10d0-45da-b9f8-7957d0c335f7"/>
				<box leftPadding="2">
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="0.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[FECHA DE PAGO:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="400" y="57" width="135" height="14" isPrintWhenDetailOverflows="true" uuid="59c28262-2101-4290-a70a-d78221fad62f"/>
				<box leftPadding="2">
					<topPen lineWidth="0.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{usuario}.toUpperCase()]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy HH:mm" isBlankWhenNull="true">
				<reportElement x="265" y="85" width="270" height="14" isPrintWhenDetailOverflows="true" uuid="53bf9a4d-7b3e-4365-a13d-78d2f47dc25c"/>
				<box leftPadding="2">
					<topPen lineWidth="0.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha_ingreso}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="0" y="85" width="265" height="14" isPrintWhenDetailOverflows="true" uuid="205f9d49-394c-4e4d-9f7c-b1b610294b75"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Top">
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[""]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="negrita" x="0" y="57" width="265" height="14" isPrintWhenDetailOverflows="true" uuid="772c8dea-1316-4e8d-a9b5-14896dddcb07"/>
				<box leftPadding="2">
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[DESCARGAR A PARTIR DEL:]]></text>
			</staticText>
			<staticText>
				<reportElement style="negrita" x="265" y="43" width="135" height="14" isPrintWhenDetailOverflows="true" uuid="7a2028a6-c949-4315-9e20-2f32f03b7a96"/>
				<box leftPadding="2">
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="0.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[INGRESADO POR:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="265" y="57" width="135" height="14" isPrintWhenDetailOverflows="true" uuid="b6dc8c8c-4ba5-45e2-a88a-bb7e3b0d9d4a"/>
				<box leftPadding="2">
					<topPen lineWidth="0.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ingresado}.toUpperCase()]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<subreport>
				<reportElement positionType="Float" x="0" y="0" width="535" height="20" uuid="b74a6668-b163-48a0-8c90-8d59564af9cb"/>
				<subreportParameter name="GASTO_GENERAL">
					<subreportParameterExpression><![CDATA[$F{gastos_generales}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="SUB_TOTAL">
					<subreportParameterExpression><![CDATA[$F{sub_total}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="LIQUIDACION">
					<subreportParameterExpression><![CDATA[$P{ID_LIQUIDACION}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="VALOR_STRING">
					<subreportParameterExpression><![CDATA[$P{VALOR_STRING}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="ADICIONAL">
					<subreportParameterExpression><![CDATA[$F{adicional}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="TOTAL_PAGAR">
					<subreportParameterExpression><![CDATA[$F{total_pagar}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="DESCUENTO">
					<subreportParameterExpression><![CDATA[$F{descuento_valor}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "titulo_credito_detalles.jasper"]]></subreportExpression>
			</subreport>
		</band>
		<band height="62" splitType="Stretch">
			<staticText>
				<reportElement style="negrita" x="30" y="48" width="170" height="12" isPrintWhenDetailOverflows="true" uuid="f8493c2a-70a8-4200-a68c-ba493c31f437"/>
				<box>
					<topPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="false"/>
				</textElement>
				<text><![CDATA[DIRECCION FINANCIERA]]></text>
			</staticText>
			<staticText>
				<reportElement style="negrita" x="240" y="48" width="180" height="12" isPrintWhenDetailOverflows="true" uuid="cbe863e9-97b7-4d14-83eb-d0f26a97f6e3"/>
				<box>
					<topPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="false"/>
				</textElement>
				<text><![CDATA[RECAUDADOR]]></text>
			</staticText>
			<image>
				<reportElement isPrintRepeatedValues="false" x="475" y="0" width="60" height="60" isPrintWhenDetailOverflows="true" uuid="52448ccc-72fe-4491-9c8a-8a4a0e59c6c5">
					<printWhenExpression><![CDATA[$F{titulo_credito} != null]]></printWhenExpression>
				</reportElement>
				<imageExpression><![CDATA[com.google.zxing.client.j2se.MatrixToImageWriter.toBufferedImage(
    new com.google.zxing.qrcode.QRCodeWriter().encode(
       java.lang.String.format("%08d", $F{titulo_credito}),
        com.google.zxing.BarcodeFormat.QR_CODE, 300, 300
    ))]]></imageExpression>
			</image>
			<image scaleImage="FillFrame" hAlign="Center" vAlign="Middle">
				<reportElement x="30" y="8" width="170" height="52" uuid="af33b8b2-4a8b-40aa-82f6-d5ee102c2fa0"/>
				<imageExpression><![CDATA[$P{IMG_FIRMA}]]></imageExpression>
			</image>
			<textField isBlankWhenNull="true">
				<reportElement x="240" y="34" width="180" height="14" isPrintWhenDetailOverflows="true" uuid="1d3cdc96-17b5-408a-a2e5-57068a9a9ad3"/>
				<box leftPadding="0">
					<topPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{usuario}.toUpperCase()]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
