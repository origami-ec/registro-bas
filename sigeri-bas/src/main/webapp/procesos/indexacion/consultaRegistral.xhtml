<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    template="/template/bpmTemplate.xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:co="http://xmlns.jcp.org/jsf/composite/co">
    <ui:define name="title">Consultas Registrales</ui:define>
    <ui:define name="content">
        <!--<script>
            jQuery.extend(jQuery.expr[':'], {
                focusable: function (el, index, selector) {
                    return $(el).is('a, button, :input, [tabindex]');
                }
            });

            $(document).on('keypress', 'input,select', function (e) {
                if (e.which === 13) {
                    e.preventDefault();
                    // Get all focusable elements on the page
                    var $canfocus = $(':focusable');
                    var index = $canfocus.index(this) + 1;
                    if (index >= $canfocus.length)
                        index = 0;
                    $canfocus.eq(index).focus();
                }
            });
        </script>-->
        <style type="text/css">
            .ui-selectcheckboxmenu-panel .ui-selectcheckboxmenu-header .ui-chkbox {
                visibility: hidden;
            }

            .ui-filter-column .ui-column-customfilter .custom-filter {
                width: 100%;
                box-sizing: border-box;
            }
        </style>
        <h:form id="mainForm" onsubmit="return false;">
            <style>
                .propiedades {
                    background-color: #52BE80 !important;
                    color: #192a37 !important;
                }
                .mercantiles {
                    background-color: pink !important;
                    color: #192a37 !important;
                }
                .gravamenes {
                    background-color: #F7DC6F !important;
                    color: #192a37 !important;
                }
            </style>
            <!--<center><h2>CONSULTAS REGISTRALES</h2></center>-->
            <p:tabView id="tabConsultas">
                <p:tab title="INDICES REGISTRALES">
                    <p:panelGrid styleClass="ui-panelgrid-blank" columns="7" style="font-weight: bolder;width: 100%;">
                        <h:panelGroup>
                            CI/RUC:<br/>
                            <p:inputText value="#{consultaRegistral.documento}" 
                                         onkeyup="if (event.keyCode == 13) {
                                                     buscarClientes();
                                                     return false;
                                                 }"
                                         onkeypress="if (event.keyCode == 13) {
                                                     return false;
                                                 }"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            NRO. REPERTORIO:<br/>
                            <p:inputNumber value="#{consultaRegistral.repertorio}" decimalPlaces="0" thousandSeparator="" 
                                           onkeyup="if (event.keyCode == 13) {
                                                       buscarClientes();
                                                       return false;
                                                   }"
                                           onkeypress="if (event.keyCode == 13) {
                                                       return false;
                                                   }"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            NRO. INSCRIPCION:<br/>
                            <p:inputNumber value="#{consultaRegistral.inscripcion}" decimalPlaces="0" thousandSeparator="" 
                                           onkeyup="if (event.keyCode == 13) {
                                                       buscarClientes();
                                                       return false;
                                                   }"
                                           onkeypress="if (event.keyCode == 13) {
                                                       return false;
                                                   }"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            CONTRATO:<br/>
                            <p:inputText value="#{consultaRegistral.contrato}" style="text-transform: uppercase;" 
                                         onkeyup="if (event.keyCode == 13) {
                                                     buscarClientes();
                                                     return false;
                                                 }"
                                         onkeypress="if (event.keyCode == 13) {
                                                     return false;
                                                 }"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            AÑO DESDE:<br/>
                            <p:inputNumber value="#{consultaRegistral.anioDesde}" decimalPlaces="0" thousandSeparator="" 
                                           onkeyup="if (event.keyCode == 13) {
                                                       buscarClientes();
                                                       return false;
                                                   }"
                                           onkeypress="if (event.keyCode == 13) {
                                                       return false;
                                                   }"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            AÑO HASTA:<br/>
                            <p:inputNumber value="#{consultaRegistral.anioHasta}" decimalPlaces="0" thousandSeparator="" 
                                           onkeyup="if (event.keyCode == 13) {
                                                       buscarClientes();
                                                       return false;
                                                   }"
                                           onkeypress="if (event.keyCode == 13) {
                                                       return false;
                                                   }"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            OFICIO/JUICIO/RES.:<br/>
                            <p:inputText value="#{consultaRegistral.juicio}" 
                                         onkeyup="if (event.keyCode == 13) {
                                                     buscarClientes();
                                                     return false;
                                                 }"
                                         onkeypress="if (event.keyCode == 13) {
                                                     return false;
                                                 }"/>
                        </h:panelGroup>
                    </p:panelGrid>
                    <p:panelGrid styleClass="ui-panelgrid-blank" columns="3" style="font-weight: bolder;width: 100%;">
                        <h:panelGroup>
                            APELLIDOS Y NOMBRES:<br/>
                            <p:inputText value="#{consultaRegistral.nombre}" style="text-transform: uppercase;width: 100%;" 
                                         onkeyup="if (event.keyCode == 13) {
                                                     buscarClientes();
                                                     return false;
                                                 }"
                                         onkeypress="if (event.keyCode == 13) {
                                                     return false;
                                                 }"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            OBSERVACION:<br/>
                            <p:inputText value="#{consultaRegistral.observacion}" style="text-transform: uppercase;width: 100%;" 
                                         onkeyup="if (event.keyCode == 13) {
                                                     buscarClientes();
                                                     return false;
                                                 }"
                                         onkeypress="if (event.keyCode == 13) {
                                                     return false;
                                                 }"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            DESCRIPCION FICHA:<br/>
                            <p:inputText value="#{consultaRegistral.descripcion}" style="text-transform: uppercase;width: 100%;" 
                                         onkeyup="if (event.keyCode == 13) {
                                                     buscarClientes();
                                                     return false;
                                                 }"
                                         onkeypress="if (event.keyCode == 13) {
                                                     return false;
                                                 }"/>
                        </h:panelGroup>
                    </p:panelGrid>
                    <p:panelGrid style="margin: 0 auto;" styleClass="ui-panelgrid-blank form-group form-elements" columns="4">
                        <p:outputPanel style="margin-bottom:10px">
                            <p:selectOneRadio id="console" value="#{consultaRegistral.tipo}" label="Tipo" layout="custom" >
                                <f:selectItem itemLabel="Gravamenes" itemValue="2"  class="gravamenes" />
                                <f:selectItem itemLabel="Propiedades" itemValue="1" class="propiedades" />
                                <f:selectItem itemLabel="Todos" itemValue="0" />
                                <!--<f:selectItem itemLabel="Mercantiles" itemValue="3" class="mercantiles" />-->
                            </p:selectOneRadio>
                            <h:panelGrid columns="2" cellpadding="2" >
                                <p:radioButton id="opt12" for="console" itemIndex="0" />
                                <h:outputLabel for="opt12" value="Gravámenes" styleClass="gravamenes" style="font-weight: bold !important; "  />
                                <p:radioButton id="opt22" for="console" itemIndex="1"  />
                                <h:outputLabel for="opt22" value="Propiedades" styleClass="propiedades" style="font-weight: bold !important; "  />
                                <p:radioButton id="opt32" for="console" itemIndex="2"  />
                                <h:outputLabel for="opt32" value="Todos" style="font-weight: bold !important; "  />
                                <!--<p:radioButton id="opt32" for="console" itemIndex="2"  />-->
                                <!--<h:outputLabel for="opt32" value="Mercantiles" styleClass="mercantiles" style="font-weight: bold !important; "  />-->
                            </h:panelGrid>
                        </p:outputPanel>
                        <p:commandButton value="Buscar Indices" actionListener="#{consultaRegistral.buscarClientes()}" icon="pi pi-search"/>
                        <p:remoteCommand name="buscarClientes" actionListener="#{consultaRegistral.buscarClientes()}"/>
                        <p:commandButton value="Generar Reporte" actionListener="#{consultaRegistral.reporteIndices()}" icon="pi pi-file-pdf"/>
                    </p:panelGrid>
                    <p:dataTable id="dtIndices" paginator="true" lazy="true" rows="100" rowsPerPageTemplate="100,200,300" filterEvent="enter" scrollable="true"
                                 paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {CurrentPageReport} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 value="#{consultaRegistral.mcl}" var="ind" emptyMessage="No se encontro ningun indice..." resizableColumns="true" scrollHeight="450"
                                 rowIndexVar="indexInd" selectionMode="single" selection="#{consultaRegistral.rmc}" rowKey="#{ind.id}" styleClass="dtIndicesStyle" 
                                 widgetVar="dtIndicesC" scrollWidth="3000"
                                 rowStyleClass="#{ind.tipolibro eq 1 ? 'propiedades' : ind.tipolibro eq 2 ? 'gravamenes' : 'mercantiles'}" >
                        <p:ajax event="rowSelect" listener="#{consultaRegistral.showDlgIndice()}" update="formMovRegSelec:tabDet:textAreaObs"/>
                        <p:column headerText="No" width="10" >
                            <h:outputText value="#{indexInd+1}" />
                        </p:column>
                        <p:column headerText="Nombre" >
                            <h:outputText id="nombreIndice" value="#{ind.nombre}"/>
                            <p:tooltip for="nombreIndice" >
                                <p:outputLabel value="Nombre: #{ind.nombre}" style="background-color: #000"/> <br/>
                                <p:outputLabel value="CI/RUC: #{ind.cedRuc}" style="background-color: #000; width: 100%"/> 
                            </p:tooltip>
                        </p:column>
                        <p:column headerText="No Ficha" width="80">
                            <!--<h:outputText id="fichasReg" value="# {consultaRegistral.getFihasIndice(ind.idmovimiento)}"/>-->
                            <!--<p:tooltip for="fichasReg" value="# {consultaRegistral.getFihasIndice(ind.idmovimiento)}" />-->
                            <h:outputText id="fichasReg" value="#{ind.numeroFicha}"/>
                            <p:tooltip for="fichasReg" value="#{ind.numeroFicha}" />
                        </p:column>
                        <!--<p:column headerText="Estado" width="95" style="background-color: # {appConfig.estadoColor(ind.movimiento.registro)}">
                            <h:outputText value="# {appConfig.estadoMovimiento(ind.movimiento.registro)}" />
                        </p:column>-->
                        <p:column headerText="Estado" width="50" >
                            <h:outputText value="#{ind.estadoMovimiento}" />
                        </p:column>
                        <p:column headerText="Inscr." width="40" sortBy="#{ind.inscripcion}" >
                            <h:outputText value="#{ind.inscripcion}"/>
                        </p:column>
                        <p:column headerText="Fecha Ins." width="40" >
                            <!--<h:outputText value="# {ind.fechaInscripcion}"><f:convertDateTime pattern="dd/MM/yyyy HH:mm"/></h:outputText>-->
                            <h:outputText value="#{ind.fechaInscripcion}"><f:convertDateTime pattern="dd/MM/yyyy"/></h:outputText>
                        </p:column>
                        <p:column headerText="Contrato" width="120" >
                            <h:outputText id="actoIndice" value="#{ind.contrato}"/> 
                            <p:tooltip for="actoIndice" trackMouse="true" value="#{ind.contrato}" />
                        </p:column>
                        <p:column headerText="Contratante" width="60">
                            <h:outputText id="papelIndice" value="#{ind.papel}"/>
                            <p:tooltip for="papelIndice" value="#{ind.papel}" />
                        </p:column>
                        <p:column headerText="No Tramite" width="40">
                            <h:outputText value="#{ind.numTramite}" />
                        </p:column>
                        <p:column headerText="Reper." width="40" sortBy="#{ind.repertorio}" >
                            <h:outputText value="#{ind.repertorio}"/>
                        </p:column>
                        <p:column headerText="Fecha Rep." width="40" sortBy="#{ind.fechaRepertorio}" >
                            <!--<h:outputText value="# {ind.fechaRepertorio}"><f:convertDateTime pattern="dd/MM/yyyy HH:mm"/></h:outputText>-->
                            <h:outputText value="#{ind.fechaRepertorio}"><f:convertDateTime pattern="dd/MM/yyyy"/></h:outputText>
                        </p:column>
                        <!--<p:column headerText="Nro Oficio" width="90">
                            <h:outputText id="oficioIndice" value="# {ind.numOficio}"/>
                            <p:tooltip for="oficioIndice" value="# {ind.numOficio}" />
                        </p:column>-->
                        <p:column headerText="Inscriptor" width="20">
                            <h:outputText value="#{ind.inscriptor}"/>
                        </p:column>
                        <p:column headerText="Oficio/Juicio/Resolucion" width="100">
                            <h:outputText id="juicioIndice" value="#{ind.numJuicio}"/>
                            <p:tooltip for="juicioIndice" value="#{ind.numJuicio}" />
                        </p:column>
                        <p:column headerText="Observacion" >
                            <h:outputText id="refPropDet" value="#{ind.observacion}"  />
                            <p:tooltip for="refPropDet" trackMouse="true" value="#{ind.observacion}" />
                        </p:column>
                        <p:column headerText="Descripcion Ficha" >
                            <!--<h:outputText id="refPropDet" value="# {consultaRegistral.referencia(ind.movimiento)}"  />-->
                            <!--<p:tooltip for="refPropDet" trackMouse="true" value="# {consultaRegistral.referencia(ind.movimiento)}" />-->
                            <h:outputText id="refPropDesc" value="#{ind.descripcionFicha}"  />
                            <p:tooltip for="refPropDesc" trackMouse="true" value="#{ind.descripcionFicha}" />
                        </p:column>
                    </p:dataTable>
                </p:tab>
                <p:tab title="CONSULTA DE CERTIFICADOS">
                    <p:panelGrid styleClass="ui-panelgrid-blank" style="font-weight: bolder;width: 100%;">
                        <p:row>
                            <p:column style="width: 50%;">
                                <h:panelGroup>
                                    APELLIDOS Y NOMBRES:<br/>
                                    <p:inputText value="#{consultaRegistral.cerNombres}" style="text-transform: uppercase;width: 100%;"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column>
                                <h:panelGroup>
                                    AÑO DESDE:<br/>
                                    <p:inputNumber value="#{consultaRegistral.cerDesde}" decimalPlaces="0" thousandSeparator="" />
                                </h:panelGroup>
                            </p:column>
                            <p:column>
                                <h:panelGroup>
                                    AÑO HASTA:<br/>
                                    <p:inputNumber value="#{consultaRegistral.cerHasta}" decimalPlaces="0" thousandSeparator="" />
                                </h:panelGroup>
                            </p:column>
                            <p:column>
                                <h:panelGroup>
                                    NRO FICHA:<br/>
                                    <p:inputNumber value="#{consultaRegistral.cerFicha}" decimalPlaces="0" thousandSeparator="" />
                                </h:panelGroup>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <h:panelGroup>
                                    CONTENIDO CERTIFICADO:<br/>
                                    <p:inputText value="#{consultaRegistral.cerObservacion}" style="text-transform: uppercase;width: 100%;"/>
                                </h:panelGroup>
                            </p:column>
                            <p:column colspan="3">
                                <h:panelGroup>
                                    DESCRIPCION FICHA:<br/>
                                    <p:inputText value="#{consultaRegistral.cerDescripcion}" style="text-transform: uppercase;width: 100%;"/>
                                </h:panelGroup>
                            </p:column>
                        </p:row>
                    </p:panelGrid>
                    <center><p:commandButton value="Buscar Indices" actionListener="#{consultaRegistral.buscarIndiceCertificados()}" icon="pi pi-search"/></center>
                    <p:dataTable id="dtIndicesCer" paginator="true" lazy="true" rows="100" rowsPerPageTemplate="100,200,300" filterEvent="enter" scrollable="true"
                                 paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {CurrentPageReport} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 value="#{consultaRegistral.lccv}" var="cer" emptyMessage="No se encontro ningun indice..." resizableColumns="true" scrollHeight="450"
                                 rowIndexVar="indexCer" selectionMode="single" selection="#{consultaRegistral.ccv}" rowKey="#{cer.id}" styleClass="dtIndicesStyle" 
                                 widgetVar="dtIndicesCer" >
                        <p:ajax event="rowSelect" listener="#{consultaRegistral.showDlgIndiceCer()}" />
                        <p:column headerText="No" width="20" >
                            <h:outputText value="#{indexCer+1}" />
                        </p:column>
                        <p:column headerText="Nombre" >
                            <h:outputText value="#{cer.propietarios}"/>
                        </p:column>
                        <p:column headerText="No Ficha" width="60">
                            <h:outputText value="#{cer.numFicha}"/>
                        </p:column>
                        <p:column headerText="No Cert." width="60">
                            <h:outputText value="#{cer.numCertificado}"/>
                        </p:column>
                        <p:column headerText="Fecha Ing." width="80" sortBy="#{cer.fechaIngreso}" >
                            <h:outputText value="#{cer.fechaIngreso}"><f:convertDateTime pattern="dd/MM/yyyy"/></h:outputText>
                        </p:column>
                        <p:column headerText="Tipo Documento" width="120" >
                            <h:outputText id="actoCer" value="#{cer.claseCertificado}"/> 
                            <p:tooltip for="actoCer" trackMouse="true" value="#{cer.claseCertificado}" />
                        </p:column>
                        <p:column headerText="No Tramite" width="60" sortBy="#{cer.numTramiteRp}">
                            <h:outputText value="#{cer.numTramiteRp}" />
                        </p:column>
                        <p:column headerText="Contenido Certificado" >
                            <h:outputText id="contenidoCer" value="#{cer.observacion}"  />
                            <p:tooltip for="contenidoCer" trackMouse="true" value="#{cer.observacion}" />
                        </p:column>
                        <p:column headerText="Descripcion Ficha" >
                            <h:outputText id="descripCer" value="#{cer.descripcionBien}"  />
                            <p:tooltip for="descripCer" trackMouse="true" value="#{cer.descripcionBien}" />
                        </p:column>
                    </p:dataTable>
                </p:tab>
                <p:tab title="OTRAS CONSULTAS">
                    <p:panelGrid style="margin: 0 auto;font-size: 18px;" columns="4" 
                                 styleClass="ui-panelgrid-blank form-group form-elements">
                        <p:outputLabel value="TIPO DE CONSULTA: " style="font-weight: bolder"/>
                        <p:selectOneMenu style="width:300px" value="#{consultaRegistral.tipoConsulta}" >
                            <f:selectItem itemValue="0" itemLabel="Seleccionar..."/>
                            <f:selectItem itemValue="1" itemLabel="Fichas Registrales"/>
                            <f:selectItem itemValue="2" itemLabel="Linderos Registrales"/>
                            <f:selectItem itemValue="3" itemLabel="Todas las Inscripciones"/>
                            <f:selectItem itemValue="4" itemLabel="Por rango de fechas, Inscripciones"/>
                            <f:selectItem itemValue="5" itemLabel="Consultas Especificas, Inscripciones"/>
                            <!--<f:selectItem itemValue="6" itemLabel="Fichas Mercantiles"/>-->
                        </p:selectOneMenu>
                        <p:spacer width="10" height="1"/>
                        <p:commandButton icon="pi pi-search" value="Consultar" actionListener="#{consultaRegistral.otrasConsultas()}"/>
                    </p:panelGrid>
                    <p:spacer height="5" width="0"/>
                    <h:panelGroup id="pnlGrpTables">
                        <p:dataTable paginator="true" lazy="true" rows="20" rowsPerPageTemplate="20,50,100" resizableColumns="true" 
                                     paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {CurrentPageReport} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     value="#{consultaRegistral.lazyMovs}" var="movs" emptyMessage="Sin elementos..." filterEvent="enter"
                                     style="margin: 0 auto;text-align: center" rendered="#{consultaRegistral.showMovs}" widgetVar="dtMovsConsultas">
                            <p:column headerText="Libro" filterBy="#{movs.libro.nombre}" filterStyle="width: 95%">
                                <p:outputLabel value="#{movs.libro.nombre}"/>
                            </p:column>
                            <p:column headerText="Acto" filterBy="#{movs.acto.nombre}" filterStyle="width: 95%">
                                <p:outputLabel value="#{movs.acto.nombre}"/>
                            </p:column>
                            <p:column headerText="Repertorio" width="80" sortBy="#{movs.numRepertorio}" 
                                      filterBy="#{movs.numRepertorio}" filterStyle="width: 95%" >
                                <p:outputLabel value="#{movs.numRepertorio}"/>
                            </p:column>
                            <p:column headerText="Año.Rep." sortBy="#{movs.fechaRepertorio}" 
                                      filterBy="#{movs.anioRep}" width="80">
                                <h:outputText value="#{movs.fechaRepertorio}"><f:convertDateTime pattern="dd/MM/yyyy"/></h:outputText>
                            </p:column>
                            <p:column headerText="Inscripcion" width="120" sortBy="#{movs.numInscripcion}" 
                                      filterBy="#{movs.numInscripcion}" filterStyle="width: 95%" >
                                <p:outputLabel value="#{movs.numInscripcion}"/>
                            </p:column>
                            <p:column headerText="Año.Ins." sortBy="#{movs.fechaInscripcion}" 
                                      filterBy="#{movs.anioIns}" width="80">
                                <h:outputText value="#{movs.fechaInscripcion}"><f:convertDateTime pattern="dd/MM/yyyy"/></h:outputText>
                            </p:column>
                            <p:column headerText="Folio" width="80" filterBy="#{movs.folioInicio}" filterStyle="width: 95%" >
                                <p:outputLabel value="#{movs.folioInicio}"/>
                            </p:column>
                            <p:column headerText="Tomo" filterBy="#{movs.numTomo}" width="35" filterStyle="width: 90%">
                                <p:outputLabel value="#{movs.numTomo}"/>
                            </p:column>
                            <p:column headerText="Inf." width="30">
                                <p:commandButton icon="pi pi-folder-open" title="Visualizar" 
                                                 actionListener="#{consultaRegistral.showDlgMovSelect(movs.id)}" />
                            </p:column>
                        </p:dataTable>

                        <p:dataTable paginator="true" lazy="true" rows="15" rowsPerPageTemplate="15,30,50" resizableColumns="true"
                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord}-{endRecord} de {totalRecords}" 
                                     value="#{consultaRegistral.lazyFichas}" var="fichs" emptyMessage="Sin elementos..." filterEvent="enter" 
                                     style="text-align: center;" rendered="#{consultaRegistral.showFichas}" widgetVar="dtFichasConsultas">
                            <p:column headerText="No Ficha" filterBy="#{fichs.numFicha}" sortBy="#{fichs.numFicha}"
                                      width="100" filterStyle="width: 75%">
                                <h:outputText  value="#{fichs.numFicha}"/>
                            </p:column>
                            <p:column headerText="Doc." width="35">
                                <p:commandButton icon="pi pi-file-pdf" title="Reporte Ficha #{fichs.numFicha}" style="background-color: orangered;"
                                                 actionListener="#{consultaRegistral.imprimirFichaRegistral(fichs)}" />
                            </p:column>
                            <p:column headerText="Inf." width="35">
                                <p:commandButton icon="pi pi-folder-open" title="Visualizar" 
                                                 actionListener="#{consultaRegistral.showDlgFichaSelect(fichs)}" />
                            </p:column>
                            <p:column headerText="Fecha Creacion" width="85">
                                <h:outputText value="#{fichs.fechaApe}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Clave Catastral" filterBy="#{fichs.claveCatastral}" width="200"
                                      filterStyle="width: 95%">
                                <h:outputText  value="#{fichs.claveCatastral}"/>
                            </p:column>
                            <p:column headerText="Estado" width="100">
                                <h:outputText value="#{fichs.estado.valor}"/>
                            </p:column>
                            <p:column headerText="Tipo Predio" width="80" >
                                <h:outputText value="URBANO" rendered="#{fichs.tipoPredio eq 'U'}"/>
                                <h:outputText value="RURAL" rendered="#{fichs.tipoPredio eq 'R'}"/>
                            </p:column>
                            <p:column headerText="Descripcion del Bien" filterBy="#{fichs.descripcionBien}" 
                                      style="text-align: left;" filterMatchMode="contains" >
                                <h:outputText id="descripcionFicha" value="#{fichs.descripcionBien}"/>
                                <p:tooltip for="descripcionFicha" value="#{fichs.descripcionBien}" position="top"/>
                            </p:column>
                        </p:dataTable>
                    </h:panelGroup>
                </p:tab>
            </p:tabView>
        </h:form>

        <p:dialog id="dlgConsultas" header="CONSULTA POR PERSONA" widgetVar="dlgConsultaInterv" modal="true" position="top" width="100%">
            <h:form id="formConsulta">
                <h:panelGrid columns="5">
                    CI/RUC/PAS.:
                    <p:outputLabel value="#{consultaRegistral.select.cedRuc}" style="font-weight: bolder;font-size: 16px"/>
                    <p:spacer width="20" height="1"/>
                    NOMBRES:
                    <p:outputLabel value="#{consultaRegistral.select.nombre}" style="font-weight: bolder;font-size: 16px"/>
                </h:panelGrid>
                <p:panel style="width: 50%;float: left;" header="MOVIMIENTOS REGISTRALES">
                    <p:dataTable paginator="true" lazy="true" rows="50" style="text-align: center;" rowIndexVar="indexMov" filterEvent="enter"
                                 paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                                 value="#{consultaRegistral.movimientosLazy}" var="mov" emptyMessage="Sin movimientos registrales." resizableColumns="true"
                                 scrollable="true" scrollHeight="400" selection="#{consultaRegistral.movimientosSeleccionados}" rowKey="#{mov.id}">
                        <!--<f:facet name="header">
                            <p:outputLabel value="MOVIMIENTOS REGISTRALES"/>
                            <p:commandLink value="VISUALIZAR" style="float: left;" oncomplete="PF('dlgMovsSelec').show()" update="formMovsSelec"/>
                        </f:facet>-->
                        <p:column headerText="**" selectionMode="multiple" width="15"/>
                        <p:column headerText="No" width="20">#{indexMov+1}</p:column>
                        <p:column headerText="Papel">
                            <p:outputLabel value="#{consultaRegistral.getPapelByMovAndCodInterv(mov.id, consultaRegistral.select.cedRuc)}"/>
                        </p:column>
                        <p:column headerText="Acto" filterBy="#{mov.acto.nombre}" filterStyle="width: 95%">
                            <p:outputLabel value="#{mov.acto.nombre}"/>
                        </p:column>
                        <p:column headerText="Repertorio" filterBy="#{mov.numRepertorio}" filterStyle="width: 95%" width="60">
                            <p:outputLabel value="#{mov.numRepertorio}"/>
                        </p:column>
                        <p:column headerText="Inscripcion" filterBy="#{mov.numInscripcion}" filterStyle="width: 95%" width="60">
                            <p:outputLabel value="#{mov.numInscripcion}"/>
                        </p:column>
                        <p:column headerText="Año.Insc." filterBy="#{mov.anioIns}" filterStyle="width: 95%" width="60">
                            <p:outputLabel value="#{mov.fechaInscripcion}"><f:convertDateTime pattern="dd/MM/yyyy"/></p:outputLabel>
                        </p:column>
                        <p:column headerText="Ver" width="15">
                            <p:commandLink actionListener="#{consultaRegistral.showDlgMovSelect(mov)}">
                                <p:graphicImage value="/resources/icons/abrir.png" height="16"/>
                            </p:commandLink>
                        </p:column>
                    </p:dataTable>
                </p:panel>
                <p:panel style="width: 50%;float: right;" header="FICHAS REGISTRALES">
                    <p:dataTable paginator="true" lazy="true" rows="50" style="text-align: center;" rowIndexVar="indexFic" filterEvent="enter" scrollHeight="400"
                                 paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {CurrentPageReport} {NextPageLink} {LastPageLink}" scrollable="true"
                                 value="#{consultaRegistral.fichasLazy}" var="fic" emptyMessage="Sin fichas registrales." resizableColumns="true" scrollWidth="700">
                        <!--<f:facet name="header">FICHAS REGISTRALES</f:facet>-->
                        <p:column headerText="No" width="20">#{indexFic+1}</p:column>
                        <p:column headerText="Sel" width="20">
                            <p:commandLink actionListener="#{consultaRegistral.showDlgFichaSelect(fic)}">
                                <p:graphicImage value="/resources/icons/abrir.png" height="16"/>
                            </p:commandLink>
                        </p:column>
                        <p:column headerText="Nº Ficha" width="100" filterBy="#{fic.numFicha}" filterStyle="width: 95%">
                            <h:outputText value="#{fic.numFicha}"/>
                        </p:column>
                        <p:column headerText="Descripcion" width="150">
                            <h:outputText id="descFricha" value="#{fic.descripcionBien}"/>
                            <p:tooltip for="descFricha" value="#{fic.descripcionBien}" position="top" />
                        </p:column>
                        <p:column headerText="Linderos" style="text-align: left;" width="3000">
                            <h:outputText id="linderoFicha" value="#{fic.linderos}"/>
                            <p:tooltip for="linderoFicha" value="#{fic.linderos}" position="top" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgMovimientos" header="Movimientos Registrales" widgetVar="dlgMovimientoRegistral" position="left,end"
                  resizable="false" closeOnEscape="true" width="70%" height="20%" >
            <h:form id="formMovimientoRegistral">
                <p:dataTable value="#{consultaRegistral.movimientosInterv}" var="mc" emptyMessage="No se Encontro Ningun Movimiento Relacionado Con esta Persona"
                             scrollable="true"  scrollHeight="240" style="width: 100%;text-align: center;" rowIndexVar="rowIndex">
                    <p:column headerText="N°" width="30">
                        #{rowIndex+1}
                    </p:column>
                    <p:column headerText="Libro">
                        <p:outputLabel value="#{mc.movimiento.libro.nombre}"/>
                    </p:column>
                    <p:column headerText="Num.Inscripcion" width="110">
                        <p:outputLabel value="#{mc.movimiento.numInscripcion}"/>
                    </p:column>
                    <p:column headerText="Fec.Inscripcion" width="100">
                        <p:outputLabel value="#{mc.movimiento.fechaInscripcion}">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </p:outputLabel>
                    </p:column>
                    <p:column headerText="Acto">
                        <p:outputLabel value="#{mc.movimiento.acto.nombre}"/>
                    </p:column>
                    <p:column headerText="Folio" width="80">
                        <p:outputLabel value="#{mc.movimiento.folioInicio}"/>
                    </p:column>
                    <p:column headerText="Repertorio" width="100">
                        <p:outputLabel value="#{mc.movimiento.numRepertorio}"/>
                    </p:column>
                    <p:column headerText="Selec." width="50">
                        <p:commandLink value=">>>>>" style="color: #0033FF;font-weight: bolder;"
                                       actionListener="#{consultaRegistral.showDlgMovSelect(mc.movimiento)}"/>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgFichas" header="Fichas Registrales" widgetVar="dlgFichasInterviniente" resizable="false" modal="true"
                  closeOnEscape="true" width="60%">
            <h:form id="formFichasInterviniente">
                <p:panelGrid columns="4" styleClass="ui-panelgrid-blank form-group form-elements" style="font-weight: bolder;">
                    CI/RUC:
                    <p:outputLabel value="#{consultaRegistral.select.cedRuc}"/>
                    Nombre:
                    <p:outputLabel value="#{consultaRegistral.select.nombre}"/>
                </p:panelGrid>
                <p:dataTable value="#{consultaRegistral.fichasInterv}" var="f" emptyMessage="No se Encontro Ningun Ficha"
                             scrollable="true" scrollHeight="240" style="width: 100%;text-align: center" rowIndexVar="rowIndex">
                    <p:column headerText="N°" width="30">
                        #{rowIndex+1}
                    </p:column>
                    <p:column headerText="No Ficha" width="100">
                        <h:outputText  value="#{f.numFicha}"/>
                    </p:column>
                    <p:column headerText="Sector">
                        <h:outputText value="#{f.sector}"/>
                    </p:column>
                    <p:column headerText="Parroquia" width="200">
                        <h:outputText value="#{f.parroquia.descripcion}"/>
                    </p:column>
                    <p:column headerText="Fec.Apertura" width="100">
                        <h:outputText value="#{f.fechaApe}">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Selec." width="50">
                        <p:commandLink actionListener="#{consultaRegistral.showDlgFichaSelect(f)}" >
                            <p:graphicImage value="/resources/icons/abrir.png" height="18"/>
                        </p:commandLink>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgMovimientoRegistral" header="MOVIMIENTO REGISTRAL" widgetVar="dlgMovRegSelec" position="left top"
                  resizable="false" closeOnEscape="true" width="800" height="500" modal="true">
            <h:form id="formMovRegSelec">
                <h:panelGrid style="font-weight: bolder;margin: 0 auto;width: 100%;" columns="1">
                    <h:panelGroup>
                        Acto/Contrato:<br/>
                        <p:inputText value="#{consultaRegistral.movimiento.acto.nombre}" readonly="true" style="width: 100%"/>
                    </h:panelGroup>
                </h:panelGrid>
                <h:panelGrid style="font-weight: bolder;margin: 0 auto;width: 100%;" columns="4">
                    <h:panelGroup>
                        Naturaleza/Libro:<br/>
                        <p:inputText value="#{consultaRegistral.movimiento.libro.nombre}" readonly="true"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        N° de Inscrip.:<br/>
                        <p:inputText value="#{consultaRegistral.movimiento.numInscripcion}" readonly="true"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Fecha de Inscrip.:<br/>
                        <p:inputText value="#{consultaRegistral.movimiento.fechaInscripcion}" readonly="true">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </p:inputText>
                    </h:panelGroup>
                    <h:panelGroup>
                        N° de Repertorio:<br/>
                        <p:inputText value="#{consultaRegistral.movimiento.numRepertorio}" readonly="true"/>
                    </h:panelGroup>
                    <h:panelGroup rendered="false">
                        N° de Tomo:<br/>
                        <p:inputText value="#{consultaRegistral.movimiento.numTomo}" readonly="true"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Fecha de Celebración.:<br/>
                        <p:inputText value="#{consultaRegistral.movimiento.fechaOto}" readonly="true">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </p:inputText>
                    </h:panelGroup>
                    <h:panelGroup>
                        Cantón:<br/>
                        <p:inputText value="#{consultaRegistral.movimiento.domicilio.nombre}" readonly="true"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Cuantía:<br/>
                        <p:inputText value="#{consultaRegistral.movimiento.cuantia}" readonly="true"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Avalúo:<br/>
                        <p:inputText value="#{consultaRegistral.movimiento.avaluoMunicipal}" readonly="true"/>
                    </h:panelGroup>
                </h:panelGrid>
                <h:panelGrid style="font-weight: bolder;margin: 0 auto;width: 100%;" columns="1">
                    <h:panelGroup>
                        Notaría/Juzgado:<br/>
                        <p:inputText value="#{consultaRegistral.movimiento.enteJudicial.nombre}" readonly="true" style="width: 100%"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Escri/Juicio/Resolu:<br/>
                        <p:inputText value="#{consultaRegistral.movimiento.escritJuicProvResolucion}" readonly="true" style="width: 100%"/>
                    </h:panelGroup>
                </h:panelGrid>
                <p:tabView id="tabDet">
                    <p:tab title="Bienes">
                        <p:dataTable value="#{consultaRegistral.fichas}" var="fich" style="width: 100%;text-align: center" scrollable="true"
                                     scrollHeight="200" rowIndexVar="rowIndex" emptyMessage="No se encontraron elementos..."
                                     resizableColumns="true"  >
                            <p:column headerText="No" width="25">
                                #{rowIndex+1}
                            </p:column>
                            <p:column headerText="No Ficha" width="100">
                                <p:outputLabel value="#{fich.numFicha}"/>
                            </p:column>
                            <p:column headerText="**" width="25">
                                <p:commandLink actionListener="#{consultaRegistral.showDlgFichaSelect(fich)}" title="Visualizar">
                                     <i class="pi pi-folder" style="font-size: 1.2em; margin-right: 5px;color: darkblue;"></i>
                                </p:commandLink>
                            </p:column>
                            <p:column headerText="Descripcion" width="150">
                                <h:outputText id="descFicha" value="#{fich.descripcionBien}"/>
                                <p:tooltip for="descFicha" value="#{fich.descripcionBien}" position="top" />
                            </p:column>
                            <p:column headerText="Linderos" width="2500" style="text-align: left;">
                                <h:outputText value="#{fich.linderos}"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Intervinientes">
                        <p:dataTable emptyMessage="No hay datos para mostrar..." var="inter" scrollable="true" resizableColumns="true"
                                     value="#{consultaRegistral.clientes}" scrollHeight="200" rowIndexVar="indexIntv">
                            <p:column headerText="No" width="25">
                                #{indexIntv+1}
                            </p:column>
                            <p:column headerText="C.I/R.U.C" width="120">
                                <p:outputLabel value="#{inter.enteInterv.cedRuc}"/>
                            </p:column>
                            <p:column headerText="Nombres">
                                <p:outputLabel id="nombreInterv" value="#{inter.enteInterv.nombre}"/>
                                <p:tooltip for="nombreInterv" value="#{inter.enteInterv.nombre}" position="top" />
                            </p:column>
                            <p:column headerText="Papel" width="100">
                                <p:outputLabel id="papelInterv" value="#{inter.papel.papel}"/>
                                <p:tooltip for="papelInterv" value="#{inter.papel.papel}" position="top" />
                            </p:column>
                            <p:column headerText="Estado" width="80">
                                <p:outputLabel id="estadoInterv" value="#{inter.estado}"/>
                                <p:tooltip for="estadoInterv" value="#{inter.estado}" position="top" />
                            </p:column>
                            <p:column headerText="Domicilio" width="80">
                                <p:outputLabel id="domicilioInterv" value="#{inter.domicilio.nombre}"/>
                                <p:tooltip for="domicilioInterv" value="#{inter.domicilio.nombre}" position="top" />
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Observacion">
                        <p:inputTextarea id="textAreaObs" value="#{consultaRegistral.movimiento.observacion}" readonly="true" 
                                         autoResize="false" scrollHeight="200" style="width: 100%; height: 150px;"/>
                    </p:tab>
                    <p:tab title="Referencias">
                        <p:dataTable style="text-align: center;width: 100%" scrollable="true" scrollHeight="200" rowIndexVar="indexMovRef" 
                                     value="#{consultaRegistral.movimiento.regMovimientoReferenciaCollection}" var="movRef" lazy="false"
                                     emptyMessage="Movimiento sin referencia(s)." resizableColumns="true">
                            <p:column headerText="No" width="20">
                                #{indexMovRef+1}
                            </p:column>
                            <p:column headerText="Acto">
                                <p:outputLabel value="#{movRef.movimientoReferencia.acto.nombre}"/>
                            </p:column>
                            <p:column headerText="Inscripcion" width="80">
                                <p:outputLabel value="#{movRef.movimientoReferencia.numInscripcion}"/>
                            </p:column>
                            <p:column headerText="Fecha Insc." width="80">
                                <p:outputLabel value="#{movRef.movimientoReferencia.fechaInscripcion}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </p:outputLabel>
                            </p:column>
                            <p:column headerText="Repertorio" width="80">
                                <p:outputLabel value="#{movRef.movimientoReferencia.numRepertorio}"/>
                            </p:column>
                            <p:column headerText="Libro">
                                <p:outputLabel value="#{movRef.movimientoReferencia.libro.nombre}"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Marginaciones">
                        <p:dataTable style="text-align: center;width: 100%" scrollable="true" scrollHeight="200" lazy="false"
                                     rowIndexVar="indexMovMarg" value="#{consultaRegistral.movimiento.regMovimientoMarginacionCollection}" var="movMarg"
                                     emptyMessage="Movimiento sin marginacion(es)." resizableColumns="true">
                            <p:column headerText="No" width="20">
                                #{indexMovMarg+1}
                            </p:column>
                            <p:column headerText="Fecha" width="80">
                                <p:outputLabel value="#{movMarg.fechaIngreso}"><f:convertDateTime pattern="dd/MM/yyyy"/></p:outputLabel>
                            </p:column>
                            <p:column headerText="Usuario" width="80">
                                <p:outputLabel value="#{movMarg.usuario}" />
                            </p:column>
                            <p:column headerText="Marginación">
                                <p:outputLabel id="textMarginacion" value="#{movMarg.observacion}" rendered="#{movMarg.estado}"/>
                                <p:outputLabel value="#{movMarg.observacion}" rendered="#{!movMarg.estado}" 
                                               style="text-decoration: line-through;" />
                                <p:tooltip for="textMarginacion" value="#{movMarg.observacion}" position="top" />
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Documentos">
                        <p:tabView id="tabDocumentos">
                            <p:tab title="Digitalización">
                                <h:panelGrid columns="5" style="font-weight: bolder;text-align: center;margin: 0 auto;">
                                    <h:panelGroup>
                                        <p:outputLabel value="Acta de Inscripción"/><br/>
                                        <p:commandLink  actionListener="#{consultaRegistral.imprimirInscripcion(consultaRegistral.movimiento)}">
                                            <p:graphicImage value="/resources/icons/archivo_firmado.png" height="80"/>
                                        </p:commandLink>
                                    </h:panelGroup>
                                    <p:spacer width="40" height="1" />
                                    <h:panelGroup>
                                        <p:outputLabel value="Bitácora"/><br/>
                                        <p:commandLink  actionListener="#{consultaRegistral.imprimirBitacoraMov()}">
                                            <p:graphicImage value="/resources/icons/buscar-archivo.png" height="80"/>
                                        </p:commandLink>
                                    </h:panelGroup>
                                    <p:spacer width="40" height="1" />
                                    <h:panelGroup>
                                        <p:outputLabel value="Digitalización"/><br/>
                                        <p:commandLink  actionListener="#{consultaRegistral.visualizaScann()}">
                                            <p:graphicImage value="/resources/icons/documents.png" height="80"/>
                                        </p:commandLink>
                                    </h:panelGroup>
                                </h:panelGrid>
                            </p:tab>
                            <p:tab title="Habilitantes">
                                <p:dataTable value="#{consultaRegistral.archivos}" style="text-align: center;" scrollable="true" lazy="false"
                                             emptyMessage="Sin documentos digitalizados." scrollHeight="300" var="doc1" paginator="true" 
                                             reflow="true" rows="5" paginatorAlwaysVisible="false" rowIndexVar="indexPosicion" >
                                    <p:column headerText="Transaccion">
                                        <p:outputLabel value="#{doc1.id}"/>
                                    </p:column>
                                    <p:column headerText="Fecha" width="100">
                                        <p:outputLabel value="#{doc1.fecha}"><f:convertDateTime pattern="dd-MM-yyyy HH:mm"/></p:outputLabel>
                                    </p:column>
                                    <p:column headerText="Paginas">
                                        <p:outputLabel value="#{doc1.numeroPaginas}"/>
                                    </p:column>
                                    <p:column headerText="Peso" >
                                        <p:outputLabel value="#{doc1.peso}"/>
                                    </p:column>
                                    <p:column headerText="View" width="80">
                                        <p:commandLink actionListener="#{consultaRegistral.visualizarDocumentos(indexPosicion)}">
                                            <p:graphicImage value="/resources/icons/reporte.png" height="20" width="20"/>   
                                        </p:commandLink>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                        </p:tabView>
                    </p:tab>
                </p:tabView>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgInformacionFicha" header="FICHA REGISTRAL" widgetVar="dlgFichaSelect" position="right bottom"
                  resizable="false" closeOnEscape="true" height="520" width="800" >
            <h:form id="formFichaSelect">
                <h:panelGrid style="font-weight: bolder;margin: 0 auto;width: 100%;" columns="3">
                    <h:panelGroup>
                        Nº de Ficha:<br/>
                        <p:inputText value="#{consultaRegistral.ficha.numFicha}" readonly="true" style="width: 100%"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Parroquia:<br/>
                        <p:inputText value="#{consultaRegistral.ficha.parroquia.descripcion}" readonly="true" style="width: 100%"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Código Predial:<br/>
                        <p:inputText value="#{consultaRegistral.ficha.claveCatastral}" readonly="true" style="width: 100%"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Dirección:<br/>
                        <p:inputText value="#{consultaRegistral.ficha.direccionBien}" readonly="true" style="width: 100%"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Área de Terreno:<br/>
                        <p:inputText value="#{consultaRegistral.ficha.areaTerreno}" readonly="true" style="width: 100%"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Área de Construcción:<br/>
                        <p:inputText value="#{consultaRegistral.ficha.areaConstruccion}" readonly="true" style="width: 100%"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Alícuota de Terreno:<br/>
                        <p:inputText value="#{consultaRegistral.ficha.alicuotaEscritura}" readonly="true" style="width: 100%"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Alícuota de Contrucción:<br/>
                        <p:inputText value="#{consultaRegistral.ficha.alicuotaConstruccion}" readonly="true" style="width: 100%"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Tipo de Bien:<br/>
                        <p:inputText value="#{consultaRegistral.ficha.uafTipoBien.descripcion}" readonly="true" style="width: 100%"/>
                    </h:panelGroup>
                </h:panelGrid>
                <p:tabView>
                    <p:tab title="Linderos Registrales">
                        <p:panel header="Descripcion del Bien">
                            <p:inputTextarea value="#{consultaRegistral.ficha.descripcionBien}" style="width: 100%;" rows="2" readonly="true"
                                             autoResize="false"/>
                        </p:panel>
                        <p:panel header="Linderos Registrales">
                            <p:inputTextarea value="#{consultaRegistral.ficha.linderos}" style="width: 100%;" rows="5" readonly="true"
                                             autoResize="false"/>
                        </p:panel>
                    </p:tab>
                    <p:tab title="Movimientos Registrales">
                        <p:dataTable value="#{consultaRegistral.movimientosFichas}" var="mf" style="text-align: center"
                                     scrollable="true" scrollHeight="240" rowIndexVar="rowIndex" resizableColumns="true">
                            <p:column headerText="No" width="30">
                                #{rowIndex+1}
                            </p:column>
                            <p:column headerText="Libro">
                                <p:outputLabel value="#{mf.movimiento.libro.nombre}"/>
                            </p:column>
                            <p:column headerText="Acto" >
                                <p:outputLabel value="#{mf.movimiento.acto.nombre}"/>
                            </p:column>
                            <p:column headerText="Repertorio" width="70">
                                <p:outputLabel value="#{mf.movimiento.numRepertorio}"/>
                            </p:column>
                            <p:column headerText="Inscripcion" width="70">
                                <p:outputLabel value="#{mf.movimiento.numInscripcion}"/>
                            </p:column>
                            <p:column headerText="Fec.Inscripc." width="70">
                                <p:outputLabel value="#{mf.movimiento.fechaInscripcion}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </p:outputLabel>
                            </p:column>
                            <p:column headerText="**" width="20">
                                <p:commandLink actionListener="#{consultaRegistral.showDlgMovSelect(mf.movimiento.id)}" title="Visualizar">
                                    <i class="pi pi-folder" style="font-size: 1.2em; margin-right: 5px;color: darkblue;"></i>
                                </p:commandLink>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Propietarios">
                        <p:dataTable value="#{consultaRegistral.ficha.regFichaPropietariosCollection}" var="pro" rowIndexVar="rowIndexProp" 
                                     lazy="false" resizableColumns="true" style="text-align: center" scrollable="true" scrollHeight="240">
                            <p:column headerText="No" width="30">
                                #{rowIndexProp+1}
                            </p:column>
                            <p:column headerText="CI/RUC" width="150">
                                <p:outputLabel value="#{pro.propietario.cedRuc}"/>
                            </p:column>
                            <p:column headerText="Nombre" >
                                <p:outputLabel value="#{pro.propietario.nombre}"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Reportes">
                        <h:panelGrid columns="3" style="font-weight: bolder;text-align: center;margin: 0 auto;">
                            <h:panelGroup>
                                <p:outputLabel value="Ficha Registral"/><br/>
                                <p:commandLink actionListener="#{consultaRegistral.imprimirFichaRegistral(consultaRegistral.ficha)}">
                                    <p:graphicImage value="/resources/icons/inscripciones.png" height="80"/>
                                </p:commandLink>
                            </h:panelGroup>
                            <p:spacer width="40" height="1" />
                            <h:panelGroup>
                                <p:outputLabel value="Bitácora"/><br/>
                                <p:commandLink actionListener="#{consultaRegistral.imprimirBitacoraFicha()}">
                                    <p:graphicImage value="/resources/icons/buscar-archivo.png" height="80"/>
                                </p:commandLink>
                            </h:panelGroup>
                        </h:panelGrid>
                    </p:tab>
                </p:tabView>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgFechas" header="Consulta Inscripciones por Fechas" widgetVar="consultaFechas"
                  resizable="false" modal="true" closeOnEscape="true" width="500">
            <h:form id="formFechas">
                <p:panelGrid styleClass="ui-panelgrid-blank form-group form-elements" 
                             style="text-align: center;font-weight: bolder;width: 100%;">
                    <p:row>
                        <p:column>
                            Desde:
                        </p:column>
                        <p:column>
                            Hasta:
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:calendar value="#{consultaRegistral.desde}" mask="dd/MM/yyyy" showOn="button" 
                                        navigator="true" 
                                        pattern="dd/MM/yyyy" placeholder="dd/MM/yyyy"/>
                        </p:column>
                        <p:column>
                            <p:calendar value="#{consultaRegistral.hasta}" mask="dd/MM/yyyy" showOn="button" 
                                        navigator="true" 
                                        pattern="dd/MM/yyyy" placeholder="dd/MM/yyyy"/>
                        </p:column>
                    </p:row>
                    <!--<p:row>
                        <p:column>
                            <p:commandButton value="Reporte" icon="pi pi-book" 
                                             actionListener="# {consultaRegistral.imprimirInscripcionesPorFecha()}"/>
                        </p:column>
                        <p:column>
                            <p:commandButton value="Buscar" icon="pi pi-search" 
                                             actionListener="# {consultaRegistral.buscarInscripFechas()}"/>
                        </p:column>
                    </p:row>-->
                </p:panelGrid><br/>
                <center>
                    <p:commandButton value="Buscar" icon="pi pi-search" 
                                     actionListener="#{consultaRegistral.buscarInscripFechas()}"/>
                </center>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgInsEspecificas" header="Consulta Especificas - Inscripciones" widgetVar="consultaEspecifica" 
                  resizable="false" modal="true" closeOnEscape="true">
            <h:form id="formInsEspecificas">
                <h:panelGrid style="font-weight: bolder;width: 100%;" columns="1">
                    <p:outputLabel value="Libro:"/>
                    <p:selectOneMenu value="#{consultaRegistral.libroConsEsp}" converter="entityConverter" 
                                     filter="true" filterMatchMode="startsWith">
                        <f:selectItem itemLabel="TODOS LOS LIBROS" itemValue="#{null}" />
                        <f:selectItems value="#{consultaRegistral.libros}" var="libro"
                                       itemLabel="#{libro.nombre}" itemValue="#{libro}"/>
                    </p:selectOneMenu>
                    <p:outputLabel value="Acto:"/>
                </h:panelGrid>
                <h:panelGrid style="font-weight: bolder;width: 100%;" columns="3">
                    <!--<p:autoComplete id="selectActo" queryDelay="400" value="# {consultaRegistral.actoConsEsp}" converter="entityConverter" completeMethod="# {consultaRegistral.complete}"
                                    var="acto" itemLabel="# {acto.abreviatura}# {acto eq null?'':' | '}# {acto.nombre}" itemValue="# {acto}" size="50" placeholder="TODOS LOS ACTOS">
                    </p:autoComplete>-->
                    <p:inputText value="#{consultaRegistral.actoConsEsp.nombre}" placeholder="TODOS LOS ACTOS" size="40" readonly="true"/>
                    <p:commandButton icon="pi pi-search" styleClass="white-button" title="Buscar acto"
                                     actionListener="#{consultaRegistral.showDlg('/resources/dialog/dlglazyactos')}" >
                        <p:ajax event="dialogReturn" listener="#{consultaRegistral.selectObjectActo}" update="formInsEspecificas"/>
                    </p:commandButton>
                    <p:commandButton icon="pi pi-trash" styleClass="white-button" title="Eliminar acto" 
                                     actionListener="#{consultaRegistral.initActo()}" update="formInsEspecificas"/>
                </h:panelGrid>
                <h:panelGrid style="font-weight: bolder;width: 100%;" columns="2">
                    <p:outputLabel value="Inscripción:"/>
                    <p:outputLabel value="Repertorio:"/>
                    <p:inputNumber value="#{consultaRegistral.inscripcionConsEsp}" decimalPlaces="0" thousandSeparator=""/>
                    <p:inputNumber value="#{consultaRegistral.repertorioConsEsp}" decimalPlaces="0" thousandSeparator=""/>
                    <p:outputLabel value="Desde:"/>
                    <p:outputLabel value="Hasta:"/>
                    <p:calendar value="#{consultaRegistral.desdeConsEsp}" mask="dd/MM/yyyy" navigator="true" 
                                pattern="dd/MM/yyyy" placeholder="dd/MM/yyyy"/>
                    <p:calendar value="#{consultaRegistral.hastaConsEsp}" mask="dd/MM/yyyy" navigator="true" 
                                pattern="dd/MM/yyyy" placeholder="dd/MM/yyyy"/>
                    <!--<p:outputLabel value="Folio:"/>-->
                    <!--<p:outputLabel value="Tomo:"/>-->
                    <!--<p:inputNumber value="# {consultaRegistral.folioConsEsp}" decimalPlaces="0" thousandSeparator=""/>-->
                    <!--<p:inputText value="# {consultaRegistral.tomoConsEsp}" />-->
                </h:panelGrid>
                <p:spacer height="10"/>
                <!--<h:panelGrid style="text-align: center;font-weight: bolder;width: 100%;" columns="2">
                    <p:commandButton value="Reporte" icon="pi pi-file" 
                                     actionListener="# {consultaRegistral.imprimirInscripcionesEspecificas()}"/>
                    <p:commandButton value="Buscar" icon="pi pi-search" 
                                     actionListener="# {consultaRegistral.consultaEspecifica()}"/>
                </h:panelGrid>-->
                <center>
                    <p:commandButton value="Buscar" icon="pi pi-search" 
                                     actionListener="#{consultaRegistral.consultaEspecifica()}"/>
                </center>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgMovsSelec" header="MOVIMIENTOS REGISTRALES SELECCIONADOS" widgetVar="dlgMovsSelec" 
                  closeOnEscape="true" width="850" height="520" position="top" modal="true">
            <h:form id="formMovsSelec">
                <p:dataGrid value="#{consultaRegistral.movimientosSeleccionados}" var="ms" rows="1" paginator="true" columns="1"
                            style="width: 100%;height: 500px;">
                    <p:panel header="ACTO: #{ms.acto.nombre}">
                        <p:panelGrid style="width: 100%;font-size: 13px;font-weight: bolder;">
                            <p:row>
                                <p:column>
                                    Num.Inscrip.:
                                    <p:outputLabel value="#{ms.numInscripcion}"/>
                                </p:column>
                                <p:column>
                                    Fecha Inscrip.:
                                    <p:outputLabel value="#{ms.fechaInscripcion}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </p:outputLabel>
                                </p:column>
                                <p:column>
                                    Num.Rep.:
                                    <p:outputLabel  value="#{ms.numRepertorio}"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    Libro:
                                    <p:outputLabel value="#{ms.libro.nombre}"/>
                                </p:column>
                                <p:column colspan="2">
                                    Acto:
                                    <p:outputLabel value="#{ms.acto.nombre}"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    Tomo:
                                    <p:outputLabel value="#{ms.numTomo}"/>
                                </p:column>
                                <p:column>
                                    Folio Inicio:
                                    <p:outputLabel value="#{ms.folioInicio}"/>
                                </p:column>
                                <p:column>
                                    Folio Fin:
                                    <p:outputLabel value="#{ms.folioFin}"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    Canton:
                                    <p:outputLabel value="#{ms.domicilio.nombre}"/>
                                </p:column>
                                <p:column>
                                    Fech/Otorg.:
                                    <p:outputLabel value="#{ms.fechaOto}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </p:outputLabel>
                                </p:column>
                                <p:column>
                                    Not./Juz.:
                                    <p:outputLabel value="#{ms.enteJudicial.nombre}"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column colspan="3">
                                    Escri/Juicio/Resolu:
                                    <p:outputLabel value="#{ms.escritJuicProvResolucion}"/>
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                    </p:panel>
                    <p:tabView>
                        <p:tab title="Intervinientes">
                            <p:dataTable emptyMessage="No hay datos para mostrar..." var="inter" scrollable="true" resizableColumns="true" 
                                         value="#{ms.regMovimientoClienteCollection}" scrollHeight="200" rowIndexVar="indIntSel">
                                <p:column headerText="No" width="25">
                                    #{indIntSel+1}
                                </p:column>
                                <p:column headerText="CI/RUC" width="120">
                                    <p:outputLabel value="#{inter.enteInterv.cedRuc}"/>
                                </p:column>
                                <p:column headerText="Nombre del Cliente">
                                    <p:outputLabel value="#{inter.enteInterv.nombre}"/>
                                </p:column>
                                <p:column headerText="Papel" width="200">
                                    <p:outputLabel value="#{inter.papel.papel}"/>
                                </p:column>
                            </p:dataTable>
                        </p:tab>
                        <p:tab title="Bienes">
                            <p:dataTable value="#{ms.regMovimientoFichaCollection}" var="f" style="text-align: center;" scrollable="true" scrollWidth="790"
                                         scrollHeight="200" rowIndexVar="rowIndex" emptyMessage="No se encontraron elementos..." resizableColumns="true">
                                <p:column headerText="No" width="25">#{rowIndex+1}</p:column>
                                <p:column headerText="No Ficha" width="100">
                                    <p:outputLabel value="#{f.ficha.numFicha}"/>
                                </p:column>
                                <p:column headerText="Selec." width="30">
                                    <p:commandLink actionListener="#{consultaRegistral.showDlgFichaSelect(f.ficha)}">
                                        <p:graphicImage value="/resources/icons/abrir.png" height="16"/>
                                    </p:commandLink>
                                </p:column>
                                <p:column headerText="Descripcion" width="150">
                                    <h:outputText id="descFicha" value="#{f.ficha.descripcionBien}"/>
                                    <p:tooltip for="descFicha" value="#{f.ficha.descripcionBien}" position="top" />
                                </p:column>
                                <p:column headerText="Linderos" width="2500" style="text-align: left;">
                                    <h:outputText value="#{f.ficha.linderos}"/>
                                </p:column>
                            </p:dataTable>
                        </p:tab>
                        <p:tab title="Observacion">
                            <p:inputTextarea value="#{ms.observacion}" readonly="true" autoResize="false" scrollHeight="200" style="width: 100%; height: 150px;"/>
                        </p:tab>
                        <p:tab title="Referencias">
                            <p:dataTable style="text-align: center;" scrollable="true" scrollHeight="200" rowIndexVar="indexMovRef" 
                                         value="#{ms.regMovimientoReferenciaCollection}" var="mrf" emptyMessage="Movimiento sin referencia(s)." resizableColumns="true">
                                <p:column headerText="No" width="20">#{indexMovRef+1}</p:column>
                                <p:column headerText="Acto">
                                    <p:outputLabel value="#{mrf.movimientoReferencia.acto.nombre}"/>
                                </p:column>
                                <p:column headerText="Inscripcion" width="80">
                                    <p:outputLabel value="#{mrf.movimientoReferencia.numInscripcion}"/>
                                </p:column>
                                <p:column headerText="Fecha Insc." width="80">
                                    <p:outputLabel value="#{mrf.movimientoReferencia.fechaInscripcion}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </p:outputLabel>
                                </p:column>
                                <p:column headerText="Repertorio" width="80">
                                    <p:outputLabel value="#{mrf.movimientoReferencia.numRepertorio}"/>
                                </p:column>
                                <p:column headerText="Libro">
                                    <p:outputLabel value="#{mrf.movimientoReferencia.libro.nombre}"/>
                                </p:column>
                            </p:dataTable>
                        </p:tab>
                        <p:tab title="Documentos">
                            <p:panelGrid columns="3" style="font-weight: bolder;text-align: center;margin: 0 auto;">
                                <p:outputLabel value="Digitalización"/>
                                <p:spacer width="10"/>
                                <p:outputLabel value="Bitacora"/>
                                <p:commandLink  actionListener="#{consultaRegistral.visualizaScann(ms)}">
                                    <p:graphicImage value="/resources/icons/reporte.png"/>
                                </p:commandLink>
                                <p:spacer width="10"/>
                                <p:commandLink actionListener="#{consultaRegistral.imprimirBitacoraMov(ms)}">
                                    <p:graphicImage value="/resources/icons/reporte.png"/>
                                </p:commandLink>
                            </p:panelGrid>
                        </p:tab>
                    </p:tabView>
                </p:dataGrid>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgIndices" header="Consulta de Indices" widgetVar="consultaIndices" resizable="false" modal="true" closeOnEscape="true" width="75%">
            <h:form id="formIndices">
                <p:dataTable value="#{consultaRegistral.listMovs}" var="movis" style="text-align: center;width: 100%;font-size: 10px;" scrollable="true"
                             scrollHeight="250" rowIndexVar="indexMovs" emptyMessage="Sin elementos..." >
                    <p:column headerText="No" width="30">
                        #{indexMovs+1}
                    </p:column>
                    <p:column headerText="Acto">
                        <p:outputLabel value="#{movis.acto.nombre}"/>
                    </p:column>
                    <p:column headerText="Papel">
                        <p:outputLabel value="#{consultaRegistral.getPapelByMovAndCodInterv(movis.id, consultaRegistral.select.cedRuc)}"/>
                    </p:column>
                    <p:column headerText="No Rep." width="75">
                        <p:outputLabel value="#{movis.numRepertorio}"/>
                    </p:column>
                    <p:column headerText="Fec.Rep." width="130">
                        <p:outputLabel value="#{movis.fechaRepertorio}">
                            <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"/>
                        </p:outputLabel>
                    </p:column>
                    <p:column headerText="No Insc." width="75">
                        <p:outputLabel value="#{movis.numInscripcion}"/>
                    </p:column>
                    <p:column headerText="Fec.Insc." width="130">
                        <p:outputLabel value="#{movis.fechaInscripcion}">
                            <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"/>
                        </p:outputLabel>
                    </p:column>
                    <p:column headerText="No Tramite" width="75">
                        <p:outputLabel value="#{movis.tramite.tramite.numTramite}"/>
                    </p:column>
                    <p:column headerText="Info" width="35">
                        <p:commandLink actionListener="#{consultaRegistral.detalleMovimiento(movis)}">
                            <p:graphicImage value="/resources/icons/abrir.png" height="15"/>
                        </p:commandLink>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgIndicesDet" header="Detalle de Indices" widgetVar="consultaIndicesDet" resizable="false" closeOnEscape="true" width="55%">
            <h:form id="formIndicesDet">
                <p:panelGrid styleClass="ui-panelgrid-blank form-group form-elements" columns="8" style="font-weight: bolder;">
                    Contrato:
                    <p:outputLabel value="#{consultaRegistral.movSelec.acto.nombre}"/>
                    No Insc.:
                    <p:outputLabel value="#{consultaRegistral.movSelec.numInscripcion}"/>
                    No Rep.:
                    <p:outputLabel value="#{consultaRegistral.movSelec.numRepertorio}"/>
                    Fec.Insc.:
                    <p:outputLabel value="#{consultaRegistral.movSelec.fechaInscripcion}">
                        <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"/>
                    </p:outputLabel>
                </p:panelGrid>
                <p:dataTable value="#{consultaRegistral.movSelec.regMovimientoClienteCollection}" var="movMc" style="text-align: center;width: 100%;font-size: 10px;" scrollable="true"
                             scrollHeight="200" rowIndexVar="indexMc" emptyMessage="Sin elementos..." >
                    <p:column headerText="No" width="30">
                        #{indexMc+1}
                    </p:column>
                    <p:column headerText="Documento">
                        <p:outputLabel value="#{movMc.enteInterv.cedRuc}"/>
                    </p:column>
                    <p:column headerText="Nombre">
                        <p:outputLabel value="#{movMc.enteInterv.nombre}"/>
                    </p:column>
                    <p:column headerText="Papel">
                        <p:outputLabel value="#{movMc.papel.papel}"/>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgIndicesTramite" header="Consulta de Indices - No de Tramite: #{consultaRegistral.numeroTramite}" widgetVar="consultaIndicesTramite" resizable="false" modal="true" closeOnEscape="true" width="75%">
            <h:form id="formIndicesTramite">
                <p:dataTable value="#{consultaRegistral.clientes}" var="movcli" style="text-align: center;width: 100%;font-size: 10px;" scrollable="true"
                             scrollHeight="250" rowIndexVar="indexMovcli" emptyMessage="Sin elementos..." >
                    <p:column headerText="No" width="30">
                        #{indexMovcli+1}
                    </p:column>
                    <p:column headerText="Acto">
                        <p:outputLabel value="#{movcli.movimiento.acto.nombre}"/>
                    </p:column>
                    <p:column headerText="Nombre">
                        <p:outputLabel value="#{movcli.enteInterv.nombre}"/>
                    </p:column>
                    <p:column headerText="Papel">
                        <p:outputLabel value="#{movcli.papel.papel}"/>
                    </p:column>
                    <p:column headerText="No Insc." width="75">
                        <p:outputLabel value="#{movcli.movimiento.numInscripcion}"/>
                    </p:column>
                    <p:column headerText="No Rep." width="75">
                        <p:outputLabel value="#{movcli.movimiento.numRepertorio}"/>
                    </p:column>
                    <p:column headerText="Fec.Insc." width="130">
                        <p:outputLabel value="#{movcli.movimiento.fechaInscripcion}">
                            <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"/>
                        </p:outputLabel>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgDocumentos" header="Documentos de Inscripcion" modal="true">
            <h:form id="frmDocuments">
                <h:panelGrid columns="5" style="font-weight: bolder;text-align: center;">
                    <p:outputLabel value="Acta de Inscripcion"/>
                    <p:spacer width="10"/>
                    <p:outputLabel value="Razon de Inscripcion"/>
                    <p:spacer width="10"/>
                    <p:outputLabel value="Razon Grupal"/>
                    <p:commandLink actionListener="#{consultaRegistral.imprimirInscripcion(consultaRegistral.movimiento)}">
                        <p:graphicImage value="/resources/icons/reporte.png"/>
                    </p:commandLink>
                    <p:spacer width="10"/>
                    <p:commandLink actionListener="#{consultaRegistral.imprimirRazon(consultaRegistral.movimiento)}">
                        <p:graphicImage value="/resources/icons/reporte.png"/>
                    </p:commandLink>
                    <p:spacer width="10"/>
                    <p:commandLink actionListener="#{consultaRegistral.generarRazonGrupal(consultaRegistral.movimiento)}">
                        <p:graphicImage value="/resources/icons/documento.png" width="20" height="20"/>
                    </p:commandLink>
                </h:panelGrid>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgLinderos" header="Busqueda por Linderos Registrales" modal="true" 
                  position="center">
            <h:form id="frmLinderos">
                <h:panelGrid columns="1" style="font-weight: bolder;text-align: center;">
                    <p:inputTextarea value="#{consultaRegistral.linderos}" cols="100" rows="3" autoResize="false" />
                    <p:commandButton icon="ui-icon-search" value="Busqueda" actionListener="#{consultaRegistral.otrasConsultas()}"/>
                </h:panelGrid>
            </h:form>
        </p:dialog>

    </ui:define>
</ui:composition>
